(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{K1o8:function(t,e,i){"use strict";i.r(e),i.d(e,"ROUTES",function(){return O}),i.d(e,"FeaturesModule",function(){return k});var r=i("tyNb"),n=i("KZX/"),s=i("mrSG"),c=i("9FRo"),o=i("fXoL"),a=i("nN8Z"),b=i("msxj"),d=i("wSIx");let u=(()=>{class t{constructor(){this.edit=new o.o,this.refresh=new o.o,this.active=new o.o,this.featuresPriorities=b.b,this.tableName="Feature Table",this.columns=[{key:"_id",type:"image",content:t=>({classname:"table_image",text:"Edit",url:this.imageUrl+`${t._id}`,event:{key:"img",id:t._id}})},{path:"name",label:"Name",searchable:!0},{path:"priority",label:"Priority"},{path:"active",label:"Active"},{key:"_id",type:"button",content:t=>({classname:"edit_link",text:"Select",link:"#",event:{key:"edit",id:t._id}})}],this.sortColumn={path:"priority",order:"asc",limit:8,page:1,search:""},this.pushCol=0}ngOnChanges(t){if(this.canActivate&&!this.pushCol&&(this.columns.push({key:"_id",type:"button",content:t=>({classname:"edit_link",text:(null==t?void 0:t.active)?"Deactivate":"Activate",link:"#",event:{key:"active",id:t._id}})}),this.pushCol=1),this.featurePage&&this.featurePage.docs.length){const t={};this.featuresPriorities.forEach(e=>t[e._id]=e.name);const e=this.featurePage.docs.map(e=>{var{priority:i}=e,r=Object(s.d)(e,["priority"]);return Object.assign({priority:t[i]},r)});this.featurePage.docs=e}}buttonEvent(t){switch(t.key){case"edit":this.edit.emit(t.id);break;case"active":this.active.emit(t.id)}}onRefresh(t){this.sortColumn=Object.assign({},t),this.refresh.emit(new c.a(t.page,t.limit,t.path,t.order,t.search))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-feature-table"]],inputs:{featurePage:"featurePage",imageUrl:"imageUrl",canActivate:"canActivate"},outputs:{edit:"edit",refresh:"refresh",active:"active"},features:[o.yb],decls:1,vars:4,consts:[[3,"tableName","columns","sortColumn","data","refresh","btnEvent"]],template:function(t,e){1&t&&(o.Tb(0,"ng-table",0),o.dc("refresh",function(t){return e.onRefresh(t)})("btnEvent",function(t){return e.buttonEvent(t)}),o.Sb()),2&t&&o.mc("tableName",e.tableName)("columns",e.columns)("sortColumn",e.sortColumn)("data",e.featurePage)},directives:[d.a],styles:[""]}),t})();var l=i("3Pt+"),f=i("I/JT"),h=i("ofXK"),m=i("gpvV"),g=i("CEEh"),p=i("xS1Y"),v=i("/ZIw");function S(t,e){if(1&t&&(o.Rb(0),o.Tb(1,"p",12),o.Ec(2),o.Sb(),o.Qb()),2&t){const t=o.fc();o.Ab(2),o.Fc(t.err)}}function T(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",10),o.dc("click",function(){return o.xc(t),o.fc().onDelete()}),o.Ec(1,"Delete"),o.Sb()}}function P(t,e){if(1&t&&(o.Tb(0,"div",13),o.Pb(1,"form-validator",14),o.Sb()),2&t){const t=o.fc();o.Ab(1),o.mc("form",t.form)}}let y=(()=>{class t extends f.a{constructor(t){super(),this.fb=t,this.priorities=b.b,this.createForm()}createForm(){this.form=this.fb.group({name:["",l.t.required],priority:["",l.t.required],images:[null]})}onError(t){this.err=t}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(l.c))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-feature-form"]],features:[o.xb],decls:15,vars:15,consts:[[1,"form-head"],[4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[3,"fieldId","control"],[3,"fieldId","control","options"],[3,"fieldId","form","hints","err"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"disabled"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"px-4","text-center","text-danger"],[1,"text-danger"],[3,"form"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Ec(1),o.Sb(),o.Cc(2,S,3,1,"ng-container",1),o.Tb(3,"form",2),o.dc("ngSubmit",function(){return e.submit()})("mouseleave",function(){return e.mouseoverShifting=!1}),o.Pb(4,"form-input",3),o.Pb(5,"form-select",4),o.Tb(6,"form-file",5),o.dc("err",function(t){return e.onError(t)}),o.Sb(),o.Tb(7,"div",6),o.Tb(8,"span",7),o.dc("mouseenter",function(){return e.mouseoverShifting=!0}),o.Tb(9,"button",8),o.Ec(10),o.Sb(),o.Sb(),o.Cc(11,T,2,0,"button",9),o.Tb(12,"button",10),o.dc("click",function(){return e.clean()}),o.Ec(13,"Clear"),o.Sb(),o.Sb(),o.Cc(14,P,2,1,"div",11),o.Sb()),2&t&&(o.Ab(1),o.Gc(" ",e.exists?"Update":"New"," Feature\n"),o.Ab(1),o.mc("ngIf",e.err.length>0),o.Ab(1),o.mc("formGroup",e.form),o.Ab(1),o.mc("fieldId","name")("control",e.form.get("name")),o.Ab(1),o.mc("fieldId","priority")("control",e.form.get("priority"))("options",e.priorities),o.Ab(1),o.mc("fieldId","images")("form",e.form)("hints","Preferred image size is 1024x400 px"),o.Ab(3),o.mc("disabled",!e.form.valid),o.Ab(1),o.Fc(e.exists?"Update":"Save"),o.Ab(1),o.mc("ngIf",e.exists),o.Ab(3),o.mc("ngIf",e.mouseoverShifting))},directives:[h.o,l.v,l.m,l.f,m.a,g.a,p.a,v.a],styles:[""]}),t})(),E=(()=>{class t{constructor(t){this.service=t,this.loading=!1,this.errMsg="",this.imageUrl=this.service.imageLink+"/image/"}ngOnInit(){this.getList(new c.a(1,8,"priority"))}getList(t){return Object(s.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.featurePage=yield this.service.getList(t).toPromise(),this.loading=!1}catch(e){this.errMsg=e.message}})}onEdit(t){const e=this.featurePage.docs.find(e=>e._id===t);this.feature=Object.assign({},e)}onCreate(t){return Object(s.a)(this,void 0,void 0,function*(){try{this.loading=!0;const e=yield this.service.create(t).toPromise();this.featurePage.docs.push(e),this.clear()}catch(e){}})}onUpdate(t){return Object(s.a)(this,void 0,void 0,function*(){try{this.loading=!0,yield this.service.update(this.feature._id,t).toPromise(),this.getList(new c.a),this.clear()}catch(e){this.errMsg=e.message}})}onDelete(t){return Object(s.a)(this,void 0,void 0,function*(){if(confirm("Are you sure to delete")){try{this.loading=!0,yield this.service.delete(t).toPromise();const e=this.featurePage.docs.findIndex(e=>e._id===t);e>-1&&this.featurePage.docs.splice(e,1),this.clear()}catch(e){this.errMsg=e.message}this.clear()}})}onActive(t){return Object(s.a)(this,void 0,void 0,function*(){try{this.loading=!0;const e=yield this.service.activate(t).toPromise(),i=this.featurePage.docs.findIndex(e=>e._id===t);this.featurePage.docs.splice(i,1,e),this.loading=!1}catch(e){}})}clear(){this.feature=null,this.errMsg="",this.loading=!1}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(a.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-index"]],decls:55,vars:5,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],[1,"col-md-8"],[3,"featurePage","imageUrl","canActivate","edit","refresh","active"],[1,"col-md-4"],[1,"border","rounded","bg-white"],[3,"item","err","create","update","delete"],[1,"bg-light","mt-3"],[1,"table","mt-2","text-secondary","table-responsive-sm","table-sm","bg-white"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"h3"),o.Ec(2,"Features"),o.Sb(),o.Sb(),o.Tb(3,"div",1),o.Tb(4,"div",2),o.Tb(5,"div",3),o.Tb(6,"app-feature-table",4),o.dc("edit",function(t){return e.onEdit(t)})("refresh",function(t){return e.getList(t)})("active",function(t){return e.onActive(t)}),o.Sb(),o.Sb(),o.Tb(7,"div",5),o.Tb(8,"div",6),o.Tb(9,"app-feature-form",7),o.dc("create",function(t){return e.onCreate(t)})("update",function(t){return e.onUpdate(t)})("delete",function(t){return e.onDelete(t)}),o.Sb(),o.Sb(),o.Tb(10,"div",8),o.Tb(11,"table",9),o.Tb(12,"tr"),o.Tb(13,"th"),o.Ec(14,"Prioity"),o.Sb(),o.Tb(15,"th"),o.Ec(16,"Details"),o.Sb(),o.Tb(17,"th"),o.Ec(18,"Quantity"),o.Sb(),o.Sb(),o.Tb(19,"tr"),o.Tb(20,"th"),o.Ec(21,"0"),o.Sb(),o.Tb(22,"td"),o.Ec(23,"Navbar elements"),o.Sb(),o.Tb(24,"td"),o.Ec(25,"1-5"),o.Sb(),o.Sb(),o.Tb(26,"tr"),o.Tb(27,"th"),o.Ec(28,"1"),o.Sb(),o.Tb(29,"td"),o.Ec(30,"Main banner"),o.Sb(),o.Tb(31,"td"),o.Ec(32,"1"),o.Sb(),o.Sb(),o.Tb(33,"tr"),o.Tb(34,"th"),o.Ec(35,"2"),o.Sb(),o.Tb(36,"td"),o.Ec(37,"EXCLUSIVE MULTIBUY"),o.Sb(),o.Tb(38,"td"),o.Ec(39,"1"),o.Sb(),o.Sb(),o.Tb(40,"tr"),o.Tb(41,"th"),o.Ec(42,"3"),o.Sb(),o.Tb(43,"td"),o.Ec(44,"SPECIAL OFFER"),o.Sb(),o.Tb(45,"td"),o.Ec(46,"1"),o.Sb(),o.Sb(),o.Pb(47,"tr"),o.Tb(48,"tr"),o.Tb(49,"th"),o.Ec(50,"4"),o.Sb(),o.Tb(51,"td"),o.Ec(52,"FEATURED OFFERS"),o.Sb(),o.Tb(53,"td"),o.Ec(54,"Unlimited"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Ab(6),o.mc("featurePage",e.featurePage)("imageUrl",e.imageUrl)("canActivate",!0),o.Ab(3),o.mc("item",e.feature)("err",e.errMsg))},directives:[u,y],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),t})();var x=i("wOd6"),A=i("MYE5");function w(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",5),o.Tb(1,"app-feature-table",6),o.dc("edit",function(e){return o.xc(t),o.fc().onEdit(e)})("refresh",function(e){return o.xc(t),o.fc().refreshData(e)}),o.Sb(),o.Sb()}if(2&t){const t=o.fc();o.Ab(1),o.mc("featurePage",t.featurePage)("imageUrl",t.imageUrl)}}function I(t,e){if(1&t){const t=o.Ub();o.Tb(0,"tr"),o.Tb(1,"td"),o.Pb(2,"img",17),o.Sb(),o.Tb(3,"td"),o.Ec(4),o.Sb(),o.Tb(5,"td"),o.Ec(6),o.Sb(),o.Tb(7,"td",13),o.Tb(8,"button",16),o.dc("click",function(){o.xc(t);const i=e.$implicit;return o.fc(2).onRemoveProduct(i._id)}),o.Pb(9,"i",18),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=e.$implicit,i=o.fc(2);o.Ab(2),o.mc("src",i.thumbUrl+t._id,o.zc),o.Ab(2),o.Fc(t.name),o.Ab(2),o.Fc(t.size)}}function U(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",7),o.Tb(2,"product-table",8),o.dc("edit",function(e){return o.xc(t),o.fc().onAddProduct(e)})("refresh",function(e){return o.xc(t),o.fc().refreshProductData(e)}),o.Sb(),o.Sb(),o.Tb(3,"div",9),o.Tb(4,"table",10),o.Tb(5,"thead"),o.Tb(6,"tr"),o.Tb(7,"td",11),o.Tb(8,"div",12),o.Tb(9,"div"),o.Ec(10),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(11,"tr"),o.Pb(12,"th"),o.Tb(13,"th"),o.Ec(14,"Name"),o.Sb(),o.Tb(15,"th"),o.Ec(16,"Size"),o.Sb(),o.Tb(17,"th",13),o.Ec(18,"Remove"),o.Sb(),o.Sb(),o.Sb(),o.Tb(19,"tbody"),o.Cc(20,I,10,3,"tr",14),o.Sb(),o.Sb(),o.Sb(),o.Tb(21,"div",15),o.Tb(22,"button",16),o.dc("click",function(){return o.xc(t),o.fc().onClose()}),o.Ec(23,"Close"),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.fc();o.Ab(2),o.mc("productPage",t.productPage)("thumbUrl",t.thumbUrl)("small",!0),o.Ab(8),o.Gc("",null==t.feature?null:t.feature.name," product list"),o.Ab(10),o.mc("ngForOf",t.feature.products)}}const O=[{path:"products",component:(()=>{class t{constructor(t,e){this.service=t,this.productService=e,this.loading=!1,this.errMsg="",this.imageUrl=this.service.imageLink+"/image/",this.thumbUrl=this.productService.imageLink+"/thumb/"}ngOnInit(){this.getList(new c.a),this.getProductList(new c.a)}getList(t){return Object(s.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.featurePage=yield this.service.getList(t).toPromise(),this.loading=!1}catch(e){this.errMsg=e.message}})}refreshData({page:t,limit:e,sort:i,order:r,search:n}){this.getList(new c.a(t,e,i,r,n))}onEdit(t){const e=this.featurePage.docs.find(e=>e._id===t);this.feature=Object.assign({},e)}getProductList(t){return Object(s.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.productPage=yield this.productService.getList(t).toPromise(),this.loading=!1}catch(e){this.errMsg=e.message}})}refreshProductData({page:t,limit:e,sort:i,order:r,search:n}){this.getProductList(new c.a(t,e,i,r,n))}onAddProduct(t){return Object(s.a)(this,void 0,void 0,function*(){try{this.loading=!0;const e=yield this.service.add(this.feature._id,t).toPromise();this.updateFeaturPage(e)}catch(e){this.errMsg=e.message}})}onRemoveProduct(t){return Object(s.a)(this,void 0,void 0,function*(){try{this.loading=!0;const e=yield this.service.remove(this.feature._id,t).toPromise();this.updateFeaturPage(e)}catch(e){this.errMsg=e.message}})}updateFeaturPage(t){this.feature=t;const e=this.featurePage.docs.findIndex(e=>e._id===t._id);e>=0&&this.featurePage.docs.splice(e,1,t),this.loading=!1}onClose(){this.feature=null}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(a.a),o.Ob(x.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-featured-products"]],decls:7,vars:2,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],["class","col-md-8",4,"ngIf"],[4,"ngIf"],[1,"col-md-8"],[3,"featurePage","imageUrl","edit","refresh"],[1,"col-md-6","bg-white"],[3,"productPage","thumbUrl","small","edit","refresh"],[1,"col-md-6"],[1,"table","table-hover","table-bordered","table-responsive-sm","bg-white"],["colspan","4",1,"form-head"],[1,"d-flex","justify-content-between"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"col-12","d-flex","flex-row-reverse"],[1,"btn","btn-sm","btn-danger",3,"click"],["_ngcontent-smn-c121","",1,"table_image",3,"src"],[1,"fa","fa-trash-o"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"h3"),o.Ec(2,"Features"),o.Sb(),o.Sb(),o.Tb(3,"div",1),o.Tb(4,"div",2),o.Cc(5,w,2,2,"div",3),o.Cc(6,U,24,5,"ng-container",4),o.Sb(),o.Sb()),2&t&&(o.Ab(5),o.mc("ngIf",!e.feature),o.Ab(1),o.mc("ngIf",e.feature))},directives:[h.o,u,A.a,h.n],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),t})()},{path:"",component:E}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({imports:[[n.a,r.d.forChild(O)]]}),t})()}}]);