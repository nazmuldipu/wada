(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{F5Ek:function(e,t,s){"use strict";s.r(t),s.d(t,"ROUTES",function(){return F}),s.d(t,"UsersModule",function(){return _});var r=s("tyNb"),n=s("KZX/"),o=s("fXoL");let i=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Ib({type:e,selectors:[["app-add"]],decls:2,vars:0,template:function(e,t){1&e&&(o.Tb(0,"p"),o.Ec(1,"add works!"),o.Sb())},styles:[""]}),e})();var c=s("mrSG"),a=s("9FRo"),l=s("/7iW"),b=s("ofXK"),d=s("HF3I"),u=s("wSIx");let f=(()=>{class e{constructor(){this.edit=new o.o,this.refresh=new o.o,this.tableName="User Table",this.columns=[{path:"name",label:"Name"},{path:"phone",label:"Phone"},{path:"email",label:"Email"},{path:"role",label:"Role"},{key:"_id",type:"button",content:e=>({classname:"edit_link",text:"Edit",link:"#",event:{key:"edit",id:e._id}})}],this.sortColumn={path:"name",order:"asc",limit:8,page:1,search:""}}buttonEvent(e){switch(e.key){case"edit":this.edit.emit(e.id)}}onRefresh(e){this.sortColumn=Object.assign({},e),this.refresh.emit(Object.assign({sort:e.path},e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Ib({type:e,selectors:[["user-list"]],inputs:{userPage:"userPage"},outputs:{edit:"edit",refresh:"refresh"},decls:1,vars:4,consts:[[3,"tableName","columns","sortColumn","data","refresh","btnEvent"]],template:function(e,t){1&e&&(o.Tb(0,"ng-table",0),o.dc("refresh",function(e){return t.onRefresh(e)})("btnEvent",function(e){return t.buttonEvent(e)}),o.Sb()),2&e&&o.mc("tableName",t.tableName)("columns",t.columns)("sortColumn",t.sortColumn)("data",t.userPage)},directives:[u.a],styles:[""]}),e})();var m=s("3Pt+"),h=s("I/JT"),g=s("IiG6"),p=s("gpvV"),v=s("keOl"),S=s("/ZIw");function w(e,t){if(1&e&&(o.Tb(0,"div",8),o.Pb(1,"form-validator",9),o.Sb()),2&e){const e=o.fc();o.Ab(1),o.mc("form",e.form)}}let T=(()=>{class e extends h.a{constructor(e){super(),this.fb=e,this.createForm()}createForm(){this.form=this.fb.group({name:["",[m.t.required,m.t.minLength(5)]],email:["",[m.t.required,m.t.email]],phone:["",[m.t.required,m.t.pattern(g.b)]],password:["",[m.t.required,m.t.minLength(6)]]})}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(m.c))},e.\u0275cmp=o.Ib({type:e,selectors:[["user-form"]],features:[o.xb],decls:14,vars:13,consts:[[1,"form-head"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[3,"fieldId","control"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"disabled"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[3,"form"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Ec(1),o.Sb(),o.Tb(2,"form",1),o.dc("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),o.Pb(3,"form-input",2),o.Pb(4,"form-input",2),o.Pb(5,"form-input",2),o.Pb(6,"form-password",2),o.Tb(7,"div",3),o.Tb(8,"span",4),o.dc("mouseenter",function(){return t.mouseoverShifting=!0}),o.Tb(9,"button",5),o.Ec(10),o.Sb(),o.Sb(),o.Tb(11,"button",6),o.dc("click",function(){return t.clean()}),o.Ec(12,"Clear"),o.Sb(),o.Sb(),o.Cc(13,w,2,1,"div",7),o.Sb()),2&e&&(o.Ab(1),o.Gc(" ",t.exists?"Update":"New"," User\n"),o.Ab(1),o.mc("formGroup",t.form),o.Ab(1),o.mc("fieldId","name")("control",t.form.get("name")),o.Ab(1),o.mc("fieldId","email")("control",t.form.get("email")),o.Ab(1),o.mc("fieldId","phone")("control",t.form.get("phone")),o.Ab(1),o.mc("fieldId","password")("control",t.form.get("password")),o.Ab(3),o.mc("disabled",!t.form.valid),o.Ab(1),o.Fc(t.exists?"Update":"Save"),o.Ab(3),o.mc("ngIf",t.mouseoverShifting))},directives:[m.v,m.m,m.f,p.a,v.a,b.o,S.a],styles:[""]}),e})();function I(e,t){1&e&&o.Pb(0,"loading")}function P(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",6),o.Tb(1,"strong"),o.Ec(2,"Success! "),o.Sb(),o.Ec(3),o.Tb(4,"button",7),o.dc("click",function(){return o.xc(e),o.fc().onClose()}),o.Tb(5,"span",8),o.Ec(6,"\xd7"),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.fc();o.Ab(3),o.Gc(" ",e.message," ")}}function y(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",9),o.Tb(1,"strong"),o.Ec(2,"Failed! "),o.Sb(),o.Ec(3),o.Tb(4,"button",7),o.dc("click",function(){return o.xc(e),o.fc().onClose()}),o.Tb(5,"span",8),o.Ec(6,"\xd7"),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.fc();o.Ab(3),o.Gc(" ",e.errorMessage," ")}}function x(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",10),o.Tb(1,"div",11),o.Tb(2,"user-list",12),o.dc("edit",function(t){return o.xc(e),o.fc().onEdit(t)})("refresh",function(t){return o.xc(e),o.fc().refreshData(t)}),o.Sb(),o.Sb(),o.Tb(3,"div",13),o.Tb(4,"div",14),o.Tb(5,"user-form",15),o.dc("create",function(t){return o.xc(e),o.fc().onCreate(t)})("update",function(t){return o.xc(e),o.fc().onUpdate(t)}),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.fc();o.Ab(2),o.mc("userPage",e.userPage),o.Ab(3),o.mc("item",e.user)}}let A=(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){this.getUserList(new a.a)}getUserList(e){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.userPage=yield this.service.getList(e).toPromise()}catch(t){this.errorMessage=t}this.loading=!1})}refreshData({page:e,limit:t,sort:s,order:r,search:n}){this.getUserList(new a.a(e,t,s,r,n))}onEdit(e){this.user=this.userPage.docs.find(t=>t._id==e)}onCreate(e){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;try{const t=yield this.service.userRegistration(e).toPromise();this.onClose(),this.message="User created",this.userPage.docs.push(t)}catch(t){this.errorMessage=t}this.loading=!1})}onUpdate(e){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;const t=this.user._id;try{yield this.service.update(t,e).toPromise(),this.onClose(),this.message="User updated",this.getUserList(new a.a)}catch(s){this.errorMessage=s}this.loading=!1})}onClose(){this.user=null,this.loading=!1,this.message="",this.errorMessage=""}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(l.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-list"]],decls:8,vars:4,consts:[[1,"container-fluid","component-head"],[1,"container"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"],[1,"row"],[1,"col-md-7","col-12"],[3,"userPage","edit","refresh"],[1,"col-md-5","col-12"],[1,"border","rounded","bg-white"],[3,"item","create","update"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h3"),o.Ec(2,"Users"),o.Sb(),o.Sb(),o.Tb(3,"div",1),o.Cc(4,I,1,0,"loading",2),o.Cc(5,P,7,1,"div",3),o.Cc(6,y,7,1,"div",4),o.Cc(7,x,6,2,"div",5),o.Sb()),2&e&&(o.Ab(4),o.mc("ngIf",t.loading),o.Ab(1),o.mc("ngIf",t.message.length>0),o.Ab(1),o.mc("ngIf",t.errorMessage.length>0),o.Ab(1),o.mc("ngIf",!t.loading))},directives:[b.o,d.a,f,T],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),e})();var C=s("1kSV"),E=s("fn6H");function U(e,t){if(1&e&&(o.Tb(0,"div",10),o.Pb(1,"form-validator",11),o.Sb()),2&e){const e=o.fc();o.Ab(1),o.mc("form",e.form)}}let k=(()=>{class e extends h.a{constructor(e){super(),this.fb=e,this.createForm()}createForm(){this.form=this.fb.group({password:["",[m.t.required,m.t.minLength(6)]]})}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(m.c))},e.\u0275cmp=o.Ib({type:e,selectors:[["reset-password-form"]],features:[o.xb],decls:14,vars:12,consts:[[1,"navbar","navbar-light","bg-light","border","border-bottom-0"],[1,"navbar-brand"],[1,"p-3","border",3,"formGroup","ngSubmit","mouseleave"],[3,"label","name","showButton"],[3,"fieldId","control"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"disabled"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[3,"form"]],template:function(e,t){1&e&&(o.Tb(0,"nav",0),o.Tb(1,"a",1),o.Ec(2),o.Sb(),o.Sb(),o.Tb(3,"form",2),o.dc("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),o.Pb(4,"form-object-label",3),o.Pb(5,"form-object-label",3),o.Pb(6,"form-password",4),o.Tb(7,"div",5),o.Tb(8,"span",6),o.dc("mouseenter",function(){return t.mouseoverShifting=!0}),o.Tb(9,"button",7),o.Ec(10," Update "),o.Sb(),o.Sb(),o.Tb(11,"button",8),o.dc("click",function(){return t.clean()}),o.Ec(12,"Clear"),o.Sb(),o.Sb(),o.Cc(13,U,2,1,"div",9),o.Sb()),2&e&&(o.Ab(2),o.Gc("Change password of ",null==t.item?null:t.item.name,""),o.Ab(1),o.mc("formGroup",t.form),o.Ab(1),o.mc("label","Name")("name",null==t.item?null:t.item.name)("showButton",!1),o.Ab(1),o.mc("label","Phone")("name",null==t.item?null:t.item.phone)("showButton",!1),o.Ab(1),o.mc("fieldId","password")("control",t.form.get("password")),o.Ab(3),o.mc("disabled",!t.form.valid),o.Ab(4),o.mc("ngIf",t.mouseoverShifting))},directives:[C.i,m.v,m.m,m.f,E.a,v.a,b.o,S.a],styles:[""]}),e})();function M(e,t){1&e&&o.Pb(0,"loading")}function O(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",6),o.Tb(1,"strong"),o.Ec(2,"Success! "),o.Sb(),o.Ec(3),o.Tb(4,"button",7),o.dc("click",function(){return o.xc(e),o.fc().onClose()}),o.Tb(5,"span",8),o.Ec(6,"\xd7"),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.fc();o.Ab(3),o.Gc(" ",e.message," ")}}function L(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",9),o.Tb(1,"strong"),o.Ec(2,"Failed! "),o.Sb(),o.Ec(3),o.Tb(4,"button",7),o.dc("click",function(){return o.xc(e),o.fc().onClose()}),o.Tb(5,"span",8),o.Ec(6,"\xd7"),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.fc();o.Ab(3),o.Gc(" ",e.errorMessage," ")}}function G(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",14),o.Tb(1,"div",15),o.Tb(2,"reset-password-form",16),o.dc("update",function(t){return o.xc(e),o.fc(2).onPasswordChange(t)}),o.Sb(),o.Sb(),o.Sb()}if(2&e){const e=o.fc(2);o.Ab(2),o.mc("item",e.user)}}function j(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",10),o.Tb(1,"div",11),o.Tb(2,"user-list",12),o.dc("edit",function(t){return o.xc(e),o.fc().onEdit(t)})("refresh",function(t){return o.xc(e),o.fc().refreshData(t)}),o.Sb(),o.Sb(),o.Cc(3,G,3,1,"div",13),o.Sb()}if(2&e){const e=o.fc();o.Ab(2),o.mc("userPage",e.userPage),o.Ab(1),o.mc("ngIf",e.user)}}const F=[{path:"add",component:i},{path:"reset-password",component:(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){this.getUserList(new a.a)}getUserList(e){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.userPage=yield this.service.getList(e).toPromise()}catch(t){this.errorMessage=t}this.loading=!1})}refreshData({page:e,limit:t,sort:s,order:r,search:n}){this.getUserList(new a.a(e,t,s,r,n))}onEdit(e){this.user=this.userPage.docs.find(t=>t._id==e)}onPasswordChange(e){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;try{const t=yield this.service.resetPassword(this.user._id,e.password).toPromise();console.log(t),this.message="Password changed"}catch(t){this.errorMessage=t}this.loading=!1})}onClose(){this.user=null,this.loading=!1,this.message="",this.errorMessage=""}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(l.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-reset-password"]],decls:8,vars:4,consts:[[1,"container-fluid","component-head"],[1,"container"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"],[1,"row"],[1,"col-md-7","col-12"],[3,"userPage","edit","refresh"],["class","col-md-5 col-12",4,"ngIf"],[1,"col-md-5","col-12"],[1,"border","rounded","bg-white"],[3,"item","update"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"h3"),o.Ec(2,"Change Password"),o.Sb(),o.Sb(),o.Tb(3,"div",1),o.Cc(4,M,1,0,"loading",2),o.Cc(5,O,7,1,"div",3),o.Cc(6,L,7,1,"div",4),o.Cc(7,j,4,2,"div",5),o.Sb()),2&e&&(o.Ab(4),o.mc("ngIf",t.loading),o.Ab(1),o.mc("ngIf",t.message.length>0),o.Ab(1),o.mc("ngIf",t.errorMessage.length>0),o.Ab(1),o.mc("ngIf",!t.loading))},directives:[b.o,d.a,f,k],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),e})()},{path:"",component:A}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({imports:[[n.a,r.d.forChild(F)]]}),e})()}}]);