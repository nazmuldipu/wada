(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{I9cL:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",function(){return Pe}),n.d(t,"InventoryModule",function(){return Ae});var r=n("tyNb"),o=n("KZX/"),i=n("mrSG"),s=n("fXoL"),c=n("JrkW"),a=n("ofXK"),l=n("3Pt+"),b=n("LRne"),u=n("Kj3r"),d=n("/uUt"),m=n("eIep"),h=n("JIr8"),f=n("lJxs"),p=n("msxj"),g=n("I/JT"),v=n("9FRo"),y=n("NuOk"),S=n("/7iW"),T=n("1kSV"),I=n("gpvV"),w=n("rd51"),P=n("aEjQ");function A(e,t){1&e&&(s.Tb(0,"span"),s.Ec(1,"*"),s.Sb())}function E(e,t){if(1&e&&(s.Tb(0,"label",6),s.Ec(1),s.Cc(2,A,2,0,"span",7),s.Sb()),2&e){const e=s.fc();s.Cb(e.col?"p-0":"col-sm-3"),s.mc("for",e.fieldId),s.Ab(1),s.Gc(" ",e.label,""),s.Ab(1),s.mc("ngIf",null==e.validator?null:e.validator.required)}}function C(e,t){if(1&e&&(s.Tb(0,"option",8),s.Ec(1),s.Sb()),2&e){const e=t.$implicit;s.mc("value",e._id),s.Ab(1),s.Gc(" ",e.name," ")}}let k=(()=>{class e{constructor(){this.fieldId=null,this.control=null,this.options=[],this.showLabel=!0,this.col=!0,this.select=new s.o,this.label=null,this.validationErrors=null}ngOnInit(){this.label=w.a[this.fieldId]?w.a[this.fieldId]:""}ngDoCheck(){this.control.validator&&(this.validator=this.control.validator({})),this.validationErrors=this.control.touched&&this.control.invalid?this.control.errors:null}onChange(e){this.select.emit(e.target.value)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["form-select"]],inputs:{fieldId:"fieldId",control:"control",options:"options",showLabel:"showLabel",col:"col"},outputs:{select:"select"},decls:8,vars:11,consts:[[1,"form-group"],["class","d-none d-sm-block col-form-label col-form-label-sm",3,"for","class",4,"ngIf"],[1,"form-control","form-control-sm",3,"id","formControl","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"validationErrors","name"],[1,"d-none","d-sm-block","col-form-label","col-form-label-sm",3,"for"],[4,"ngIf"],[3,"value"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Cc(1,E,3,5,"label",1),s.Tb(2,"div"),s.Tb(3,"select",2),s.dc("change",function(e){return t.onChange(e)}),s.Tb(4,"option",3),s.Ec(5),s.Sb(),s.Cc(6,C,2,2,"option",4),s.Sb(),s.Pb(7,"form-property-validator",5),s.Sb(),s.Sb()),2&e&&(s.Cb(t.col?"":"row"),s.Ab(1),s.mc("ngIf",t.showLabel),s.Ab(1),s.Cb(t.col?"":"col-sm-9"),s.Ab(1),s.mc("id",t.fieldId)("formControl",t.control),s.Ab(2),s.Gc("Select a ",t.label,""),s.Ab(1),s.mc("ngForOf",t.options),s.Ab(1),s.mc("validationErrors",t.validationErrors)("name",t.label))},directives:[a.o,l.s,l.l,l.d,l.p,l.u,a.n,P.a],styles:[""]}),e})();var O=n("wOd6");function x(e,t){if(1&e&&s.Pb(0,"ngb-highlight",9),2&e){const e=t.result,n=t.term,r=s.fc();s.mc("result",r.getProductName(e))("term",n)}}function F(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div"),s.Tb(1,"div",10),s.Tb(2,"div",4),s.Tb(3,"div",6),s.Tb(4,"label",11),s.Ec(5),s.Sb(),s.Sb(),s.Tb(6,"div",5),s.Pb(7,"input",12),s.Sb(),s.Tb(8,"div",13),s.Pb(9,"input",14),s.Sb(),s.Tb(10,"div",13),s.Tb(11,"input",15),s.dc("change",function(){return s.xc(e),s.fc().updateTotal()}),s.Sb(),s.Sb(),s.Tb(12,"div",16),s.Tb(13,"label",8),s.Ec(14),s.Sb(),s.Sb(),s.Tb(15,"div",6),s.Tb(16,"button",17),s.dc("click",function(){s.xc(e);const n=t.index;return s.fc().onRemoveItem(n)}),s.Pb(17,"i",18),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=t.index,n=s.fc();s.Ab(1),s.mc("formGroupName",e),s.Ab(4),s.Gc("",e+1," "),s.Ab(2),s.mc("ngbTypeahead",n.searchProduct)("editable",!1)("resultFormatter",n.productFormatter)("inputFormatter",n.productFormatter),s.Ab(2),s.oc("placeholder","Quantity ",e+1,""),s.Ab(2),s.oc("placeholder","Purchase price ",e+1,""),s.Ab(3),s.Fc(n.parent.value.items[e].quantity*n.parent.value.items[e].purchase_price)}}let j=(()=>{class e{constructor(e){this.productService=e,this.removeItem=new s.o,this.total=0,this.searchProduct=e=>e.pipe(Object(u.a)(300),Object(d.a)(),Object(m.a)(e=>e.length<3?[]:this.productService.getList(new v.a(1,10,"name","asc",e)).pipe(Object(h.a)(()=>Object(b.a)([])))),Object(f.a)(e=>e?e.docs:[])),this.productFormatter=e=>{if(e)return`${e.name} [S: ${e.size}] [P: ${e.price}]`}}ngOnInit(){}getProductName(e){if(e)return`${e.name} [S: ${e.size}] [P: ${e.price}]`}onRemoveItem(e){this.removeItem.emit(e)}updateTotal(){const e=this.parent.get("items");let t=0;for(let n=0;n<e.length;n++)t+=e.value[n].quantity*e.value[n].purchase_price;this.total=t}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(O.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["inventory-item-form"]],inputs:{parent:"parent"},outputs:{removeItem:"removeItem"},decls:17,vars:3,consts:[["rt",""],[3,"formGroup"],["formArrayName","items"],[4,"ngFor","ngForOf"],[1,"form-row"],[1,"col"],[1,"col-auto"],[1,"col-1","text-right"],[1,"form-control","form-control-sm","text-right"],[3,"result","term"],[3,"formGroupName"],[1,"form-control","form-control-sm"],["id","supplierId","type","text","formControlName","product","placeholder","Product name / barcode",1,"form-control","form-control-sm",3,"ngbTypeahead","editable","resultFormatter","inputFormatter"],[1,"col-2"],["type","number","formControlName","quantity","id","quantity",1,"form-control","form-control-sm",3,"placeholder"],["type","number","formControlName","purchase_price","id","purchase_price",1,"form-control","form-control-sm",3,"placeholder","change"],[1,"col-1"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"]],template:function(e,t){1&e&&(s.Cc(0,x,1,2,"ng-template",null,0,s.Dc),s.Tb(2,"div",1),s.Tb(3,"div",2),s.Cc(4,F,18,9,"div",3),s.Tb(5,"div",4),s.Tb(6,"div",5),s.Pb(7,"strong"),s.Sb(),s.Tb(8,"div",6),s.Tb(9,"strong"),s.Ec(10," Total"),s.Sb(),s.Sb(),s.Tb(11,"div",7),s.Tb(12,"label",8),s.Tb(13,"strong"),s.Ec(14),s.Sb(),s.Sb(),s.Sb(),s.Tb(15,"div",6),s.Ec(16," \xa0 \xa0 \xa0 \xa0 "),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.Ab(2),s.mc("formGroup",t.parent),s.Ab(2),s.mc("ngForOf",t.parent.controls.items.controls),s.Ab(10),s.Gc(" ",t.total,""))},directives:[l.m,l.f,l.b,a.n,T.f,l.g,l.a,T.k,l.l,l.e,l.q],styles:[""]}),e})();var _=n("/ZIw");function M(e,t){1&e&&(s.Tb(0,"small",25),s.Ec(1,"Warehouse Required"),s.Sb())}function q(e,t){1&e&&(s.Tb(0,"small",25),s.Ec(1,"Supplier Required"),s.Sb())}function U(e,t){if(1&e&&(s.Tb(0,"div",26),s.Pb(1,"form-validator",27),s.Sb()),2&e){const e=s.fc();s.Ab(1),s.mc("form",e.form)}}let N=(()=>{class e extends g.a{constructor(e,t,n){super(),this.fb=e,this.warehouseService=t,this.userService=n,this.inventoryTypes=p.b,this.searchWarehouse=e=>e.pipe(Object(u.a)(300),Object(d.a)(),Object(m.a)(e=>e.length<3?[]:this.warehouseService.getList(new v.a(1,10,"name","asc",e)).pipe(Object(h.a)(()=>Object(b.a)([])))),Object(f.a)(e=>e?e.docs:[])),this.searchUser=e=>e.pipe(Object(u.a)(300),Object(d.a)(),Object(m.a)(e=>e.length<3?[]:this.userService.getList(new v.a(1,10,"name","asc",e)).pipe(Object(h.a)(()=>Object(b.a)([])))),Object(f.a)(e=>e?e.docs:[])),this.warehouseFormatter=e=>{if(e)return`${e.name} [${e.admin.name}]`},this.userFormatter=e=>{if(e)return`${e.name}  [${e.phone}]`},this.createForm()}createForm(){this.form=this.fb.group({reference:["",l.t.required],inventoryType:["in",l.t.required],warehouse:["",l.t.required],supplier:["",l.t.required],items:this.fb.array([this.createInventoryItem()])})}createInventoryItem(){return this.fb.group({product:["",l.t.required],quantity:[1,l.t.required],purchase_price:[0,l.t.required]})}pushInventoryItem(){this.form.get("items").push(this.createInventoryItem())}onRemoveInventoryItem(e){this.form.get("items").removeAt(e)}clean(){this.form.get("items").clear(),super.clean(),this.pushInventoryItem()}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(l.c),s.Ob(y.a),s.Ob(S.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["inventory-form"]],features:[s.xb],decls:36,vars:21,consts:[[1,"border"],[1,"navbar","navbar-light","bg-light"],[1,"form-head"],["type","button","routerLink","/dashboard/inventory",1,"btn","btn-primary","btn-sm"],[1,"fa","fa-list"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-row"],[1,"col-md-6"],[3,"fieldId","control"],[3,"fieldId","control","options"],["for","warehouse",1,"d-none","d-sm-block","col-form-label","col-form-label-sm","p-0"],["id","warehouse","type","text","formControlName","warehouse","placeholder","Warehouse name",1,"form-control","form-control-sm",3,"ngbTypeahead","resultFormatter","inputFormatter","editable"],["class","form-text text-danger",4,"ngIf"],["for","supplier",1,"d-none","d-sm-block","col-form-label","col-form-label-sm","p-0"],["id","supplier","type","text","formControlName","supplier","placeholder","Supplier name / phone",1,"form-control","form-control-sm",3,"ngbTypeahead","resultFormatter","inputFormatter","editable"],[1,"row"],[1,"col-md-12","my-3"],[3,"parent","removeItem"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-plus"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"disabled"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"form-text","text-danger"],[1,"text-danger"],[3,"form"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"div",1),s.Tb(2,"div",2),s.Ec(3),s.Sb(),s.Tb(4,"a",3),s.Pb(5,"i",4),s.Ec(6," Inventory List "),s.Sb(),s.Sb(),s.Tb(7,"form",5),s.dc("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),s.Tb(8,"div",6),s.Tb(9,"div",7),s.Pb(10,"form-input",8),s.Sb(),s.Tb(11,"div",7),s.Pb(12,"form-select",9),s.Sb(),s.Tb(13,"div",7),s.Tb(14,"label",10),s.Ec(15,"Warehouse*"),s.Sb(),s.Pb(16,"input",11),s.Cc(17,M,2,0,"small",12),s.Sb(),s.Tb(18,"div",7),s.Tb(19,"label",13),s.Ec(20,"Supplier*"),s.Sb(),s.Pb(21,"input",14),s.Cc(22,q,2,0,"small",12),s.Sb(),s.Sb(),s.Tb(23,"div",15),s.Tb(24,"div",16),s.Tb(25,"inventory-item-form",17),s.dc("removeItem",function(e){return t.onRemoveInventoryItem(e)}),s.Sb(),s.Tb(26,"button",18),s.dc("click",function(){return t.pushInventoryItem()}),s.Pb(27,"i",19),s.Ec(28," Add Item "),s.Sb(),s.Sb(),s.Sb(),s.Tb(29,"div",20),s.Tb(30,"span",21),s.dc("mouseenter",function(){return t.mouseoverShifting=!0}),s.Tb(31,"button",22),s.Ec(32),s.Sb(),s.Sb(),s.Tb(33,"button",23),s.dc("click",function(){return t.clean()}),s.Ec(34,"Clear"),s.Sb(),s.Sb(),s.Cc(35,U,2,1,"div",24),s.Sb(),s.Sb()),2&e&&(s.Ab(3),s.Gc(" ",t.exists?"Update":"New"," Inventory "),s.Ab(4),s.mc("formGroup",t.form),s.Ab(3),s.mc("fieldId","reference")("control",t.form.get("reference")),s.Ab(2),s.mc("fieldId","inventoryType")("control",t.form.get("inventoryType"))("options",t.inventoryTypes),s.Ab(4),s.mc("ngbTypeahead",t.searchWarehouse)("resultFormatter",t.warehouseFormatter)("inputFormatter",t.warehouseFormatter)("editable",!1),s.Ab(1),s.mc("ngIf",t.form.controls.warehouse.errors&&t.form.controls.warehouse.touched),s.Ab(4),s.mc("ngbTypeahead",t.searchUser)("resultFormatter",t.userFormatter)("inputFormatter",t.userFormatter)("editable",!1),s.Ab(1),s.mc("ngIf",t.form.controls.supplier.errors&&t.form.controls.supplier.touched),s.Ab(3),s.mc("parent",t.form),s.Ab(6),s.mc("disabled",!t.form.valid),s.Ab(1),s.Fc(t.exists?"Update":"Save"),s.Ab(3),s.mc("ngIf",t.mouseoverShifting))},directives:[T.i,r.c,l.v,l.m,l.f,I.a,k,l.a,T.k,l.l,l.e,a.o,j,_.a],styles:[""]}),e})();var W=n("HF3I");function R(e,t){1&e&&s.Pb(0,"loading")}function G(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",8),s.Tb(1,"strong"),s.Ec(2,"Success! "),s.Sb(),s.Ec(3),s.Tb(4,"button",9),s.dc("click",function(){return s.xc(e),s.fc().onClose()}),s.Tb(5,"span",10),s.Ec(6,"\xd7"),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=s.fc();s.Ab(3),s.Gc(" ",e.message," ")}}function L(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",11),s.Tb(1,"strong"),s.Ec(2,"Failed! "),s.Sb(),s.Ec(3),s.Tb(4,"button",9),s.dc("click",function(){return s.xc(e),s.fc().onClose()}),s.Tb(5,"span",10),s.Ec(6,"\xd7"),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=s.fc();s.Ab(3),s.Gc(" ",e.errorMessage," ")}}let D=(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){}onCreateInventory(e){return Object(i.a)(this,void 0,void 0,function*(){const t=this.inventoryObjectToSend(e);try{this.loading=!0;const e=yield this.service.create(t).toPromise();console.log(e),this.loading=!1}catch(n){console.log(n),this.errorMessage=n}})}inventoryObjectToSend(e){const t={inventoryType:e.inventoryType,reference:e.reference,warehouseId:e.warehouse._id,supplierId:e.supplier._id,items:[]};for(let n of e.items)t.items.push({productId:n.product._id,quantity:n.quantity,purchase_price:n.purchase_price});return t}onClose(){this.loading=!1,this.errorMessage="",this.message=""}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(c.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-add"]],decls:10,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container","bg-white"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],[1,"row"],[1,"col-12","mb-5"],[3,"create"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"h3"),s.Ec(2,"Add Inventory"),s.Sb(),s.Sb(),s.Tb(3,"div",1),s.Cc(4,R,1,0,"loading",2),s.Cc(5,G,7,1,"div",3),s.Cc(6,L,7,1,"div",4),s.Tb(7,"div",5),s.Tb(8,"div",6),s.Tb(9,"inventory-form",7),s.dc("create",function(e){return t.onCreateInventory(e)}),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.Ab(4),s.mc("ngIf",t.loading),s.Ab(1),s.mc("ngIf",t.message.length>0),s.Ab(1),s.mc("ngIf",t.errorMessage.length>0))},directives:[a.o,N,W.a],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),e})(),$=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["app-convert"]],decls:2,vars:0,template:function(e,t){1&e&&(s.Tb(0,"p"),s.Ec(1,"convert works!"),s.Sb())},styles:[""]}),e})();var B=n("uEz7");function z(e,t){if(1&e){const e=s.Ub();s.Tb(0,"li",4),s.dc("click",function(){s.xc(e);const n=t.$implicit;return s.fc().onSelectWarehouse(n)}),s.Ec(1),s.Sb()}if(2&e){const e=t.$implicit;s.Ab(1),s.Hc(" ",e.name," [",null==e||null==e.admin?null:e.admin.phone,"]")}}function J(e,t){if(1&e){const e=s.Ub();s.Tb(0,"pagination",5),s.dc("paginate",function(t){return s.xc(e),s.fc().refreshWarehouseData(t)}),s.Sb()}if(2&e){const e=s.fc();s.mc("page",e.warehousePage)("short",!0)}}let H=(()=>{class e{constructor(e){this.warehouseService=e,this.select=new s.o,this.loading=!1}ngOnInit(){this.getWarehouseList(new v.a)}getWarehouseList(e){return Object(i.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.warehousePage=yield this.warehouseService.getList(e).toPromise()}catch(t){console.log(t)}this.loading=!1})}refreshWarehouseData({page:e,limit:t,sort:n,order:r,search:o}){this.getWarehouseList(new v.a(e,t,n,r,o))}onSelectWarehouse(e){this.select.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(y.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["warehouse-side-list"]],outputs:{select:"select"},decls:8,vars:2,consts:[[1,"list-group","mb-1"],[1,"list-group-item","disabled"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[3,"page","short","paginate",4,"ngIf"],[1,"list-group-item",3,"click"],[3,"page","short","paginate"]],template:function(e,t){1&e&&(s.Tb(0,"ul",0),s.Tb(1,"li",1),s.Ec(2,"Please select a "),s.Tb(3,"strong"),s.Ec(4," Warehouse "),s.Sb(),s.Ec(5," from list below"),s.Sb(),s.Cc(6,z,2,2,"li",2),s.Sb(),s.Cc(7,J,1,2,"pagination",3)),2&e&&(s.Ab(6),s.mc("ngForOf",null==t.warehousePage?null:t.warehousePage.docs),s.Ab(1),s.mc("ngIf",(null==t.warehousePage?null:t.warehousePage.totalPages)>1))},directives:[a.n,a.o,B.a],styles:[".list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}"]}),e})();var K=n("wSIx");let Q=(()=>{class e{constructor(){this.details=new s.o,this.refresh=new s.o,this.tableName="Inventory Table",this.columns=[{path:"updatedAt",label:"Updated",pipe:"date",pipeArgs:"dd/MM/yyyy"},{path:"reference",label:"Reference"},{path:"inventoryType",label:"Inventory Type"},{path:"items.length",label:"Number of Products"},{key:"_id",type:"button",content:e=>({classname:"edit_link",text:"Details",link:"#",event:{key:"details",id:e._id}})}],this.sortColumn={path:"name",order:"asc",limit:8,page:1,search:""}}buttonEvent(e){switch(e.key){case"details":this.details.emit(e.id)}}onRefresh(e){this.sortColumn=Object.assign({},e),this.refresh.emit(Object.assign({sort:e.path},e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["inventory-list"]],inputs:{inventoryPage:"inventoryPage"},outputs:{details:"details",refresh:"refresh"},decls:1,vars:4,consts:[[3,"tableName","columns","sortColumn","data","refresh","btnEvent"]],template:function(e,t){1&e&&(s.Tb(0,"ng-table",0),s.dc("refresh",function(e){return t.onRefresh(e)})("btnEvent",function(e){return t.buttonEvent(e)}),s.Sb()),2&e&&s.mc("tableName",t.tableName)("columns",t.columns)("sortColumn",t.sortColumn)("data",t.inventoryPage)},directives:[K.a],styles:["[_nghost-%COMP%]{display:block;padding:30px}"],changeDetection:0}),e})();function V(e,t){if(1&e&&(s.Tb(0,"div",7),s.Tb(1,"label",14),s.Ec(2,"Supplier: "),s.Sb(),s.Tb(3,"label",15),s.Ec(4),s.Sb(),s.Sb()),2&e){const e=s.fc();s.Ab(4),s.Hc("",null==e.inventory||null==e.inventory.supplier?null:e.inventory.supplier.name,"[",null==e.inventory||null==e.inventory.supplier?null:e.inventory.supplier.phone,"]")}}function X(e,t){if(1&e&&(s.Tb(0,"div",7),s.Tb(1,"label",14),s.Ec(2,"From Storehouse: "),s.Sb(),s.Tb(3,"label",15),s.Ec(4),s.Sb(),s.Sb()),2&e){const e=s.fc();s.Ab(4),s.Fc(null==e.inventory||null==e.inventory.from?null:e.inventory.from.name)}}function Y(e,t){if(1&e&&(s.Tb(0,"tr"),s.Tb(1,"td"),s.Ec(2),s.Sb(),s.Tb(3,"td"),s.Ec(4),s.Sb(),s.Tb(5,"td"),s.Ec(6),s.Sb(),s.Tb(7,"td"),s.Ec(8),s.gc(9,"currency"),s.Sb(),s.Tb(10,"td",18),s.Ec(11),s.gc(12,"currency"),s.Sb(),s.Sb()),2&e){const e=t.$implicit,n=t.index;s.Ab(2),s.Fc(n+1),s.Ab(2),s.Fc(null==e||null==e.product?null:e.product.slug),s.Ab(2),s.Fc(null==e?null:e.quantity),s.Ab(2),s.Fc(s.jc(9,5,null==e?null:e.purchase_price,"BDT","symbol-narrow")),s.Ab(3),s.Fc(s.jc(12,9,(null==e?null:e.quantity)*(null==e?null:e.purchase_price),"BDT","symbol-narrow"))}}let Z=(()=>{class e{constructor(){}ngOnChanges(e){if(e&&this.inventory){let e=0,t=0;for(let n=0;n<this.inventory.items.length;n++){const r=this.inventory.items[n];e+=r.quantity,t+=r.purchase_price*r.quantity}this.total={price:t,quantity:e}}}onPrint(){window.print()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["inventory-details"]],inputs:{inventory:"inventory"},features:[s.yb],decls:72,vars:18,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["routerLink","//dashboard/inventory/add",1,"btn","btn-success","btn-sm","mx-1"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-primary","mx-1",3,"click"],[1,"fa","fa-print"],[1,"form-group","row","m-0","border"],[1,"col-sm-6","p-0"],["for","createdAt",1,"col-auto","col-form-label"],["id","createdAt",1,"col-form-label"],[1,"form-group","row","border","border-top-0","m-0"],["for","createdBy",1,"col-auto","col-form-label"],["id","createdBy",1,"col-form-label"],[1,"form-group","row","border","border-top-0","m-0","mb-3"],["for","shop",1,"col-auto","col-form-label"],["id","shop",1,"col-form-label"],["class","col-sm-6 p-0",4,"ngIf"],[1,"table","table-hover","table-bordered","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","5"]],template:function(e,t){1&e&&(s.Tb(0,"nav",0),s.Tb(1,"a",1),s.Ec(2,"Inventory Details"),s.Sb(),s.Tb(3,"div"),s.Tb(4,"a",2),s.Pb(5,"i",3),s.Ec(6," ADD Inventory "),s.Sb(),s.Tb(7,"button",4),s.dc("click",function(){return t.onPrint()}),s.Pb(8,"i",5),s.Ec(9," Print"),s.Sb(),s.Sb(),s.Sb(),s.Tb(10,"div",6),s.Tb(11,"div",7),s.Tb(12,"label",8),s.Ec(13,"Ref:"),s.Sb(),s.Tb(14,"label",9),s.Ec(15),s.Sb(),s.Sb(),s.Tb(16,"div",7),s.Tb(17,"label",8),s.Ec(18,"Inventory Type:"),s.Sb(),s.Tb(19,"label",9),s.Ec(20),s.Sb(),s.Sb(),s.Sb(),s.Tb(21,"div",10),s.Tb(22,"div",7),s.Tb(23,"label",8),s.Ec(24,"Updated at: "),s.Sb(),s.Tb(25,"label",9),s.Ec(26),s.gc(27,"date"),s.Sb(),s.Sb(),s.Tb(28,"div",7),s.Tb(29,"label",11),s.Ec(30,"Updated by: "),s.Sb(),s.Tb(31,"label",12),s.Ec(32),s.Sb(),s.Sb(),s.Sb(),s.Tb(33,"div",13),s.Tb(34,"div",7),s.Tb(35,"label",14),s.Ec(36,"Storehouse: "),s.Sb(),s.Tb(37,"label",15),s.Ec(38),s.Sb(),s.Sb(),s.Cc(39,V,5,2,"div",16),s.Cc(40,X,5,1,"div",16),s.Sb(),s.Tb(41,"table",17),s.Tb(42,"thead"),s.Tb(43,"tr"),s.Tb(44,"th"),s.Ec(45,"Sl"),s.Sb(),s.Tb(46,"th"),s.Ec(47,"Product"),s.Sb(),s.Tb(48,"th"),s.Ec(49,"Quantity"),s.Sb(),s.Tb(50,"th"),s.Ec(51,"Purchase Rate"),s.Sb(),s.Tb(52,"th",18),s.Ec(53,"Amount"),s.Sb(),s.Sb(),s.Sb(),s.Tb(54,"tbody"),s.Cc(55,Y,13,13,"tr",19),s.Tb(56,"tr"),s.Pb(57,"td",20),s.Sb(),s.Sb(),s.Tb(58,"tfoot"),s.Tb(59,"tr"),s.Pb(60,"td"),s.Tb(61,"td"),s.Tb(62,"strong"),s.Ec(63," Grand Total"),s.Sb(),s.Sb(),s.Tb(64,"td"),s.Tb(65,"strong"),s.Ec(66),s.Sb(),s.Sb(),s.Pb(67,"td"),s.Tb(68,"td",18),s.Tb(69,"strong"),s.Ec(70),s.gc(71,"currency"),s.Sb(),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.Ab(15),s.Fc(null==t.inventory?null:t.inventory.reference),s.Ab(5),s.Fc(null==t.inventory?null:t.inventory.inventoryType),s.Ab(6),s.Fc(s.ic(27,11,null==t.inventory?null:t.inventory.updatedAt,"medium")),s.Ab(6),s.Hc("",null==t.inventory||null==t.inventory.updatedBy?null:t.inventory.updatedBy.name,"[",null==t.inventory||null==t.inventory.updatedBy?null:t.inventory.updatedBy.phone,"]"),s.Ab(6),s.Fc(null==t.inventory||null==t.inventory.warehouse?null:t.inventory.warehouse.name),s.Ab(1),s.mc("ngIf",null==t.inventory?null:t.inventory.supplier),s.Ab(1),s.mc("ngIf",null==t.inventory?null:t.inventory.from),s.Ab(15),s.mc("ngForOf",null==t.inventory?null:t.inventory.items),s.Ab(11),s.Gc(" ",null==t.total?null:t.total.quantity," "),s.Ab(4),s.Fc(s.jc(71,14,null==t.total?null:t.total.price,"BDT","symbol-narrow")))},directives:[T.i,r.c,a.o,a.n],pipes:[a.f,a.d],styles:["[_nghost-%COMP%]{display:block;padding:30px}.tbrow[_ngcontent-%COMP%]:hover{background-color:#81ffd3}"]}),e})();function ee(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",7),s.Tb(1,"inventory-list",8),s.dc("details",function(t){return s.xc(e),s.fc().onDetails(t)})("refresh",function(t){s.xc(e);const n=s.fc();return n.refreshInventoryData(null==n.warehouse?null:n.warehouse._id,t)}),s.Sb(),s.Tb(2,"button",9),s.dc("click",function(){return s.xc(e),s.fc().onClose("list")}),s.Ec(3,"Close"),s.Sb(),s.Sb()}if(2&e){const e=s.fc();s.Ab(1),s.mc("inventoryPage",e.inventoryPage)}}function te(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",7),s.Pb(1,"inventory-details",10),s.Tb(2,"button",9),s.dc("click",function(){return s.xc(e),s.fc().onClose("details")}),s.Ec(3,"Close"),s.Sb(),s.Sb()}if(2&e){const e=s.fc();s.Ab(1),s.mc("inventory",e.inventory)}}let ne=(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.message="",this.errorMessage=""}onWarehouseSelect(e){this.warehouse=e,this.getInventoryByWarehouseId(e._id,new v.a)}getInventoryByWarehouseId(e,t){return Object(i.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.inventoryPage=yield this.service.byWarehouseId(e,t).toPromise()}catch(n){this.errorMessage=n}this.loading=!1})}refreshInventoryData(e,{page:t,limit:n,sort:r,order:o,search:i}){this.getInventoryByWarehouseId(e,new v.a(t,n,r,o,i))}onDetails(e){this.inventory=this.inventoryPage.docs.find(t=>t._id===e)}onClose(e){switch(e){case"details":this.inventory=null;break;case"list":this.inventoryPage=null,this.warehouse=null}}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(c.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-index"]],decls:11,vars:3,consts:[[1,"container-fluid","component-head","d-print-none"],[1,"form-head","d-none","d-print-block","m-3"],[1,"container"],[1,"row"],[1,"col-md-3","d-print-none"],[3,"select"],["class","col bg-white pb-3",4,"ngIf"],[1,"col","bg-white","pb-3"],[3,"inventoryPage","details","refresh"],[1,"btn","btn-sm","btn-danger","d-print-none","float-right",3,"click"],[3,"inventory"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"h3"),s.Ec(2,"Inventory List"),s.Sb(),s.Sb(),s.Tb(3,"div",1),s.Ec(4),s.Sb(),s.Tb(5,"div",2),s.Tb(6,"div",3),s.Tb(7,"div",4),s.Tb(8,"warehouse-side-list",5),s.dc("select",function(e){return t.onWarehouseSelect(e)}),s.Sb(),s.Sb(),s.Cc(9,ee,4,1,"div",6),s.Cc(10,te,4,1,"div",6),s.Sb(),s.Sb()),2&e&&(s.Ab(4),s.Gc(" ",null==t.warehouse?null:t.warehouse.name," Warehouse Inventory list\n"),s.Ab(5),s.mc("ngIf",t.inventoryPage&&!t.inventory),s.Ab(1),s.mc("ngIf",t.inventory))},directives:[H,a.o,Q,Z],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),e})();var re=n("tk/3"),oe=n("uWAI");let ie=(()=>{class e{constructor(e){this.dataSource=e,this.storehouseUrl="api/storehouse",this.storehouseLink=this.dataSource.baseUrl+this.storehouseUrl}create(e){return this.dataSource.sendRequest("POST",this.storehouseUrl,e,!0,null)}update(e,t){return this.dataSource.sendRequest("PUT",this.storehouseUrl+`/${e}`,t,!0,null)}getAll(e,t,n,r){const o=this.generateParam(e,t,n,r);return this.dataSource.sendRequest("GET",this.storehouseUrl,null,!1,o)}get(e){return this.dataSource.sendRequest("GET",this.storehouseUrl+`/${e}`,null,!1,null)}search(e){const t=(new re.d).set("param",e);return this.dataSource.sendRequest("GET",this.storehouseUrl+"/search",null,!1,t)}generateParam(e,t,n,r){return(new re.d).set("page",e.toString()).set("limit",t.toString()).set("sort",n).set("order",r)}}return e.\u0275fac=function(t){return new(t||e)(s.ac(oe.a))},e.\u0275prov=s.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function se(e,t){if(1&e){const e=s.Ub();s.Tb(0,"li",13),s.dc("click",function(){s.xc(e);const n=t.$implicit;return s.fc(2).onSelectStorehouse(n._id)}),s.Ec(1),s.Sb()}if(2&e){const e=t.$implicit;s.Ab(1),s.Hc(" ",e.name,"[",e.storekeeper_number,"]")}}function ce(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",8),s.Tb(1,"ul",9),s.Tb(2,"li",10),s.Ec(3,"Please select a "),s.Tb(4,"strong"),s.Ec(5," Storehouse from List "),s.Sb(),s.Sb(),s.Cc(6,se,2,2,"li",11),s.Sb(),s.Tb(7,"pagination",12),s.dc("paginate",function(t){return s.xc(e),s.fc().onChangeStorehousePage(t)}),s.Sb(),s.Sb()}if(2&e){const e=s.fc();s.Ab(6),s.mc("ngForOf",e.storehousePage.docs),s.Ab(1),s.mc("page",e.storehousePage)("small",!0)}}function ae(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",14),s.Tb(1,"inventory-list",15),s.dc("details",function(t){return s.xc(e),s.fc().onDetails(t)}),s.Sb(),s.Tb(2,"pagination",12),s.dc("paginate",function(t){s.xc(e);const n=s.fc();return n.onChangeInventoryPage(null==n.storehouse?null:n.storehouse._id,t)}),s.Sb(),s.Tb(3,"button",16),s.dc("click",function(){return s.xc(e),s.fc().onClose("list")}),s.Ec(4,"Close"),s.Sb(),s.Sb()}if(2&e){const e=s.fc();s.Ab(1),s.mc("inventoryPage",e.inventoryPage),s.Ab(1),s.mc("page",e.inventoryPage)("small",!0)}}function le(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",17),s.Pb(1,"inventory-details",18),s.Tb(2,"button",19),s.dc("click",function(){return s.xc(e),s.fc().onClose("details")}),s.Ec(3,"Close"),s.Sb(),s.Tb(4,"button",20),s.dc("click",function(){s.xc(e);const t=s.fc();return t.onApprove(t.inventory._id)}),s.Ec(5,"Approve"),s.Sb(),s.Sb()}if(2&e){const e=s.fc();s.Ab(1),s.mc("inventory",e.inventory)}}function be(e,t){1&e&&s.Pb(0,"loading")}let ue=(()=>{class e{constructor(e,t){this.storehouseService=e,this.inventoryService=t,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){this.getAllStorehouse()}getAllStorehouse(e=1,t=8,n="priority",r="asc"){return Object(i.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.storehousePage=yield this.storehouseService.getAll(e,t,n,r).toPromise()}catch(o){this.errorMessage=o}this.loading=!1})}onChangeStorehousePage(e){this.getAllStorehouse(e.pageNumber,e.limit,e.sort,e.order)}onSelectStorehouse(e){const t=this.storehousePage.docs.find(t=>t._id==e);this.storehouse=Object.assign({},t),this.getAllUnapprovedInventories(e)}getAllUnapprovedInventories(e,t=1,n=8,r="priority",o="asc"){return Object(i.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.inventoryPage=yield this.inventoryService.getUnapprovedInventories(e,t,n,r,o).toPromise()}catch(i){this.errorMessage=i}this.loading=!1})}onChangeInventoryPage(e,t){this.getAllUnapprovedInventories(e,t.pageNumber,t.limit,t.sort,t.order)}onDetails(e){const t=this.inventoryPage.docs.find(t=>t._id==e);this.inventory=Object.assign({},t)}onClose(e){switch(e){case"details":this.inventory=null;break;case"list":this.inventoryPage=null,this.storehouse=null}}onApprove(e){return Object(i.a)(this,void 0,void 0,function*(){this.loading=!0;try{yield this.inventoryService.approveTransferedInventories(e).toPromise(),this.onClose("details"),this.getAllUnapprovedInventories(this.storehouse._id)}catch(t){this.errorMessage=t}this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(ie),s.Ob(c.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-receive"]],decls:10,vars:4,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],["class","col-md-3 d-print-none",4,"ngIf"],["class","col-12 bg-white pb-3",4,"ngIf"],["class","col-12 bg-white px-0 pb-3",4,"ngIf"],[1,"col-9"],[4,"ngIf"],[1,"col-md-3","d-print-none"],[1,"list-group","mb-1"],[1,"list-group-item","disabled"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[3,"page","small","paginate"],[1,"list-group-item",3,"click"],[1,"col-12","bg-white","pb-3"],[3,"inventoryPage","details"],[1,"btn","btn-sm","btn-danger","d-print-none",3,"click"],[1,"col-12","bg-white","px-0","pb-3"],[3,"inventory"],[1,"btn","btn-sm","btn-danger","d-print-none","mx-1",3,"click"],[1,"btn","btn-sm","btn-success","d-print-none","mx-1",3,"click"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"h3"),s.Ec(2,"Receive Inventory"),s.Sb(),s.Sb(),s.Tb(3,"div",1),s.Tb(4,"div",2),s.Cc(5,ce,8,3,"div",3),s.Cc(6,ae,5,3,"div",4),s.Cc(7,le,6,1,"div",5),s.Tb(8,"div",6),s.Cc(9,be,1,0,"loading",7),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.Ab(5),s.mc("ngIf",(null==t.storehousePage||null==t.storehousePage.docs?null:t.storehousePage.docs.length)&&!(null!=t.inventoryPage&&null!=t.inventoryPage.docs&&t.inventoryPage.docs.length)),s.Ab(1),s.mc("ngIf",(null==t.inventoryPage||null==t.inventoryPage.docs?null:t.inventoryPage.docs.length)&&!t.inventory),s.Ab(1),s.mc("ngIf",t.inventory),s.Ab(2),s.mc("ngIf",t.loading))},directives:[a.o,a.n,B.a,Q,Z,W.a],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}"]}),e})();var de=n("Ysqf");let me=(()=>{class e{constructor(){this.refresh=new s.o,this.tableName="Stock List of",this.columns=[{path:"product.name",label:"Product",totalLabel:!0},{path:"product.size",label:"Size"},{path:"quantity",label:"Quantity",className:"text-center",total:!0},{path:"purchase_price",label:"Purchase price",total:!0,className:"text-right"}],this.sortColumn={path:"name",order:"asc",limit:8,page:1,search:""}}onRefresh(e){this.sortColumn=Object.assign({},e),this.refresh.emit(Object.assign({sort:e.path},e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["stock-list"]],inputs:{stockPage:"stockPage",name:"name"},outputs:{refresh:"refresh"},decls:1,vars:4,consts:[[3,"tableName","columns","sortColumn","data","refresh"]],template:function(e,t){1&e&&(s.Tb(0,"ng-table",0),s.dc("refresh",function(e){return t.onRefresh(e)}),s.Sb()),2&e&&s.mc("tableName",t.tableName+" "+t.name)("columns",t.columns)("sortColumn",t.sortColumn)("data",t.stockPage)},directives:[K.a],styles:[""],changeDetection:0}),e})();function he(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",6),s.Tb(1,"stock-list",7),s.dc("refresh",function(t){s.xc(e);const n=s.fc();return n.onRefresh(null==n.warehouse?null:n.warehouse._id,t)}),s.Sb(),s.Tb(2,"div",8),s.Tb(3,"button",9),s.dc("click",function(){return s.xc(e),s.fc().onClose()}),s.Pb(4,"i",10),s.Ec(5," Close"),s.Sb(),s.Tb(6,"button",11),s.dc("click",function(){return s.xc(e),s.fc().onPrint()}),s.Pb(7,"i",12),s.Ec(8," Print"),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=s.fc();s.Ab(1),s.mc("name",null==e.warehouse?null:e.warehouse.name)("stockPage",e.stockPage)}}let fe=(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){}onWarehouseSelect(e){this.warehouse=e,console.log(this.warehouse),this.getProductStockbyWarehouseId(e._id,new v.a)}getProductStockbyWarehouseId(e,t){return Object(i.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.stockPage=yield this.service.byWarehouseId(e,t).toPromise()}catch(n){this.errorMessage=n}this.loading=!1})}onRefresh(e,{page:t,limit:n,sort:r,order:o,search:i}){this.getProductStockbyWarehouseId(e,new v.a(t,n,r,o,i))}onClose(){this.stockPage=null,this.warehouse=null}onPrint(){window.print()}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(de.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-stocks"]],decls:8,vars:1,consts:[[1,"container-fluid","component-head","d-print-none"],[1,"container"],[1,"row"],[1,"col-md-3","d-print-none"],[3,"select"],["class","col bg-white",4,"ngIf"],[1,"col","bg-white"],[3,"name","stockPage","refresh"],[1,"d-flex","flex-row-reverse","bd-highlight"],[1,"btn","btn-sm","btn-danger","d-print-none","mx-1",3,"click"],[1,"fa","fa-times"],[1,"btn","btn-sm","btn-primary","d-print-none","mx-1",3,"click"],[1,"fa","fa-print"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"h3"),s.Ec(2,"Stocks"),s.Sb(),s.Sb(),s.Tb(3,"div",1),s.Tb(4,"div",2),s.Tb(5,"div",3),s.Tb(6,"warehouse-side-list",4),s.dc("select",function(e){return t.onWarehouseSelect(e)}),s.Sb(),s.Sb(),s.Cc(7,he,9,2,"div",5),s.Sb(),s.Sb()),2&e&&(s.Ab(7),s.mc("ngIf",null==t.stockPage||null==t.stockPage.docs?null:t.stockPage.docs.length))},directives:[H,a.o,me],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}.col[_ngcontent-%COMP%]{padding:20px}@media print{.col[_ngcontent-%COMP%]{padding:50px}}"]}),e})();var pe=n("vkgz");function ge(e,t){if(1&e&&s.Pb(0,"ngb-highlight",24),2&e){const e=t.term;s.mc("result",t.result.name)("term",e)}}function ve(e,t){1&e&&(s.Tb(0,"small",25),s.Ec(1," Reference required "),s.Sb())}const ye=function(e){return{disabled:e}};let Se=(()=>{class e{constructor(e,t){this.fb=e,this.storehouseService=t,this.create=new s.o,this.mouseoverShifting=!1,this.searching=!1,this.searchFailed=!1,this.searchStorehouse=e=>e.pipe(Object(u.a)(300),Object(d.a)(),Object(pe.a)(()=>this.searching=!0),Object(m.a)(e=>this.storehouseService.search(e).pipe(Object(pe.a)(e=>{this.searchFailed=!1}),Object(h.a)(()=>(this.searchFailed=!0,Object(b.a)([]))))),Object(pe.a)(()=>this.searching=!1)),this.storehouseFormatter=e=>{if(e)return`${e.name} [${e.storekeeper_number}]`},this.createForm()}ngOnInit(){}createForm(){this.form=this.fb.group({inventoryType:["transfer",l.t.required],reference:["",l.t.required],from:["",l.t.required],storehouse:["",l.t.required],items:this.fb.array([this.createInventoryItem()])})}pushInventoryItem(){this.form.get("items").push(this.createInventoryItem())}createInventoryItem(){return this.fb.group({product:["",l.t.required],quantity:["",l.t.required],purchase_price:["",l.t.required]})}onRemoveInventoryItem(e){this.form.get("items").removeAt(e)}submit(){this.form.valid&&this.create.emit(this.form.value)}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(l.c),s.Ob(ie))},e.\u0275cmp=s.Ib({type:e,selectors:[["inventory-transfer-form"]],outputs:{create:"create"},decls:37,vars:16,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["type","button","routerLink","/dashboard/inventory",1,"btn","btn-success","btn-sm"],[1,"fa","fa-list"],["rt",""],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"col-md-6","mb-3"],["for","reference"],["type","text","id","reference","formControlName","reference","placeholder","Inventory Number ",1,"form-control"],["class","text-danger",4,"ngIf"],["for","inventoryType"],["id","inventoryType","formControlName","inventoryType",1,"form-control"],["value","transfer"],["for","source_storehouse"],["id","source_storehouse","type","text","formControlName","from","placeholder","From Storehouse name or owner number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],["for","storehouse"],["id","storehouse","type","text","formControlName","storehouse","placeholder","To Storehouse name or owner number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],[1,"row"],[1,"col-md-12"],[3,"parent","removeItem"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"ngClass"],[3,"result","term"],[1,"text-danger"]],template:function(e,t){if(1&e&&(s.Tb(0,"nav",0),s.Tb(1,"a",1),s.Ec(2,"Inventory Transfer form"),s.Sb(),s.Tb(3,"a",2),s.Pb(4,"i",3),s.Ec(5," INVENTORY LIST "),s.Sb(),s.Sb(),s.Cc(6,ge,1,2,"ng-template",null,4,s.Dc),s.Tb(8,"form",5),s.dc("ngSubmit",function(){return t.submit()}),s.Tb(9,"div",6),s.Tb(10,"div",7),s.Tb(11,"label",8),s.Ec(12,"Inventory Number* "),s.Sb(),s.Pb(13,"input",9),s.Cc(14,ve,2,0,"small",10),s.Sb(),s.Tb(15,"div",7),s.Tb(16,"label",11),s.Ec(17,"Inventory Type *"),s.Sb(),s.Tb(18,"select",12),s.Tb(19,"option",13),s.Ec(20," Transfer "),s.Sb(),s.Sb(),s.Sb(),s.Tb(21,"div",7),s.Tb(22,"label",14),s.Ec(23,"Source Storehouse*"),s.Sb(),s.Pb(24,"input",15),s.Sb(),s.Tb(25,"div",7),s.Tb(26,"label",16),s.Ec(27,"Destination Storehouse*"),s.Sb(),s.Pb(28,"input",17),s.Sb(),s.Sb(),s.Tb(29,"div",18),s.Tb(30,"div",19),s.Tb(31,"inventory-item-form",20),s.dc("removeItem",function(e){return t.onRemoveInventoryItem(e)}),s.Sb(),s.Sb(),s.Tb(32,"button",21),s.dc("click",function(){return t.pushInventoryItem()}),s.Ec(33," Add Inventory Item "),s.Sb(),s.Sb(),s.Tb(34,"div",22),s.Tb(35,"button",23),s.Ec(36," Transfer "),s.Sb(),s.Sb(),s.Sb()),2&e){const e=s.uc(7);s.Ab(8),s.mc("formGroup",t.form),s.Ab(6),s.mc("ngIf",t.form.controls.reference.errors&&t.form.controls.reference.touched),s.Ab(10),s.Gb("is-invalid",t.searchFailed),s.mc("ngbTypeahead",t.searchStorehouse)("resultTemplate",e)("inputFormatter",t.storehouseFormatter),s.Ab(4),s.Gb("is-invalid",t.searchFailed),s.mc("ngbTypeahead",t.searchStorehouse)("resultTemplate",e)("inputFormatter",t.storehouseFormatter),s.Ab(3),s.mc("parent",t.form),s.Ab(4),s.mc("ngClass",s.qc(14,ye,t.form.invalid))}},directives:[T.i,r.c,l.v,l.m,l.f,l.a,l.l,l.e,a.o,l.s,l.p,l.u,T.k,j,a.m,T.f],styles:[""]}),e})();function Te(e,t){1&e&&s.Pb(0,"loading")}function Ie(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",8),s.Tb(1,"strong"),s.Ec(2,"Success! "),s.Sb(),s.Ec(3),s.Tb(4,"button",9),s.dc("click",function(){return s.xc(e),s.fc().onClose()}),s.Tb(5,"span",10),s.Ec(6,"\xd7"),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=s.fc();s.Ab(3),s.Gc(" ",e.message," ")}}function we(e,t){if(1&e){const e=s.Ub();s.Tb(0,"div",11),s.Tb(1,"strong"),s.Ec(2,"Failed! "),s.Sb(),s.Ec(3),s.Tb(4,"button",9),s.dc("click",function(){return s.xc(e),s.fc().onClose()}),s.Tb(5,"span",10),s.Ec(6,"\xd7"),s.Sb(),s.Sb(),s.Sb()}if(2&e){const e=s.fc();s.Ab(3),s.Gc(" ",e.errorMessage," ")}}const Pe=[{path:"add",component:D},{path:"add/:id",component:D},{path:"stocks",component:fe},{path:"transfer",component:(()=>{class e{constructor(e){this.inventoryService=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){}onCreateInventory(e){return Object(i.a)(this,void 0,void 0,function*(){console.log(e),this.loading=!0,this.errorMessage="",this.message="";try{yield this.inventoryService.transfer(e).toPromise(),this.message="Inventory added"}catch(t){this.errorMessage=t}this.loading=!1})}onClose(){this.loading=!1,this.errorMessage="",this.message=""}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(c.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-transfer"]],decls:10,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container-fluid"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"create"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"]],template:function(e,t){1&e&&(s.Tb(0,"div",0),s.Tb(1,"h3"),s.Ec(2,"Inventory Transfer"),s.Sb(),s.Sb(),s.Tb(3,"div",1),s.Cc(4,Te,1,0,"loading",2),s.Cc(5,Ie,7,1,"div",3),s.Cc(6,we,7,1,"div",4),s.Tb(7,"div",5),s.Tb(8,"div",6),s.Tb(9,"inventory-transfer-form",7),s.dc("create",function(e){return t.onCreateInventory(e)}),s.Sb(),s.Sb(),s.Sb(),s.Sb()),2&e&&(s.Ab(4),s.mc("ngIf",t.loading),s.Ab(1),s.mc("ngIf",t.message.length>0),s.Ab(1),s.mc("ngIf",t.errorMessage.length>0))},directives:[a.o,Se,W.a],styles:[""]}),e})()},{path:"receive",component:ue},{path:"convert",component:$},{path:"",component:ne}];let Ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({imports:[[o.a,r.d.forChild(Pe)]]}),e})()}}]);