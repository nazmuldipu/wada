(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{F5Ek:function(e,t,s){"use strict";s.r(t),s.d(t,"ROUTES",function(){return j}),s.d(t,"UsersModule",function(){return F});var r=s("tyNb"),i=s("KZX/"),n=s("fXoL");let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Ib({type:e,selectors:[["app-add"]],decls:2,vars:0,template:function(e,t){1&e&&(n.Tb(0,"p"),n.Ec(1,"add works!"),n.Sb())},styles:[""]}),e})();var c=s("mrSG"),a=s("9FRo"),l=s("/7iW"),d=s("ofXK"),b=s("HF3I"),u=s("wSIx");let f=(()=>{class e{constructor(){this.edit=new n.o,this.active=new n.o,this.refresh=new n.o,this.tableName="User Table",this.columns=[{path:"name",label:"Name"},{path:"phone",label:"Phone"},{path:"email",label:"Email"},{path:"role",label:"Role"},{path:"active",label:"Active"},{key:"_id",type:"button",content:e=>({classname:"edit_link",text:(null==e?void 0:e.active)?"Deactivate":"Activate",link:"#",event:{key:"active",id:e._id}})},{key:"_id",type:"button",content:e=>({classname:"edit_link",text:"Edit",link:"#",event:{key:"edit",id:e._id}})}],this.sortColumn={path:"name",order:"asc",limit:8,page:1,search:""}}buttonEvent(e){switch(e.key){case"edit":this.edit.emit(e.id);break;case"active":this.active.emit(e.id)}}onRefresh(e){this.sortColumn=Object.assign({},e),this.refresh.emit(Object.assign({sort:e.path},e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Ib({type:e,selectors:[["user-list"]],inputs:{userPage:"userPage"},outputs:{edit:"edit",active:"active",refresh:"refresh"},decls:1,vars:4,consts:[[3,"tableName","columns","sortColumn","data","refresh","btnEvent"]],template:function(e,t){1&e&&(n.Tb(0,"ng-table",0),n.dc("refresh",function(e){return t.onRefresh(e)})("btnEvent",function(e){return t.buttonEvent(e)}),n.Sb()),2&e&&n.mc("tableName",t.tableName)("columns",t.columns)("sortColumn",t.sortColumn)("data",t.userPage)},directives:[u.a],styles:[""]}),e})();var m=s("3Pt+"),h=s("I/JT"),g=s("IiG6"),p=s("gpvV"),v=s("keOl"),S=s("/ZIw");function w(e,t){if(1&e&&(n.Tb(0,"div",8),n.Pb(1,"form-validator",9),n.Sb()),2&e){const e=n.fc();n.Ab(1),n.mc("form",e.form)}}let T=(()=>{class e extends h.a{constructor(e){super(),this.fb=e,this.createForm()}createForm(){this.form=this.fb.group({name:["",[m.t.required,m.t.minLength(5)]],email:["",[m.t.required,m.t.email]],phone:["",[m.t.required,m.t.pattern(g.b)]],password:["",[m.t.required,m.t.minLength(6)]]})}}return e.\u0275fac=function(t){return new(t||e)(n.Ob(m.c))},e.\u0275cmp=n.Ib({type:e,selectors:[["user-form"]],features:[n.xb],decls:14,vars:13,consts:[[1,"form-head"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[3,"fieldId","control"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"disabled"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[3,"form"]],template:function(e,t){1&e&&(n.Tb(0,"div",0),n.Ec(1),n.Sb(),n.Tb(2,"form",1),n.dc("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),n.Pb(3,"form-input",2),n.Pb(4,"form-input",2),n.Pb(5,"form-input",2),n.Pb(6,"form-password",2),n.Tb(7,"div",3),n.Tb(8,"span",4),n.dc("mouseenter",function(){return t.mouseoverShifting=!0}),n.Tb(9,"button",5),n.Ec(10),n.Sb(),n.Sb(),n.Tb(11,"button",6),n.dc("click",function(){return t.clean()}),n.Ec(12,"Clear"),n.Sb(),n.Sb(),n.Cc(13,w,2,1,"div",7),n.Sb()),2&e&&(n.Ab(1),n.Gc(" ",t.exists?"Update":"New"," User\n"),n.Ab(1),n.mc("formGroup",t.form),n.Ab(1),n.mc("fieldId","name")("control",t.form.get("name")),n.Ab(1),n.mc("fieldId","email")("control",t.form.get("email")),n.Ab(1),n.mc("fieldId","phone")("control",t.form.get("phone")),n.Ab(1),n.mc("fieldId","password")("control",t.form.get("password")),n.Ab(3),n.mc("disabled",!t.form.valid),n.Ab(1),n.Fc(t.exists?"Update":"Save"),n.Ab(3),n.mc("ngIf",t.mouseoverShifting))},directives:[m.v,m.m,m.f,p.a,v.a,d.o,S.a],styles:[""]}),e})();function I(e,t){1&e&&n.Pb(0,"loading")}function y(e,t){if(1&e){const e=n.Ub();n.Tb(0,"div",6),n.Tb(1,"strong"),n.Ec(2,"Success! "),n.Sb(),n.Ec(3),n.Tb(4,"button",7),n.dc("click",function(){return n.xc(e),n.fc().onClose()}),n.Tb(5,"span",8),n.Ec(6,"\xd7"),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=n.fc();n.Ab(3),n.Gc(" ",e.message," ")}}function P(e,t){if(1&e){const e=n.Ub();n.Tb(0,"div",9),n.Tb(1,"strong"),n.Ec(2,"Failed! "),n.Sb(),n.Ec(3),n.Tb(4,"button",7),n.dc("click",function(){return n.xc(e),n.fc().onClose()}),n.Tb(5,"span",8),n.Ec(6,"\xd7"),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=n.fc();n.Ab(3),n.Gc(" ",e.errorMessage," ")}}function A(e,t){if(1&e){const e=n.Ub();n.Tb(0,"div",10),n.Tb(1,"div",11),n.Tb(2,"user-list",12),n.dc("edit",function(t){return n.xc(e),n.fc().onEdit(t)})("refresh",function(t){return n.xc(e),n.fc().refreshData(t)})("active",function(t){return n.xc(e),n.fc().onActive(t)}),n.Sb(),n.Sb(),n.Tb(3,"div",13),n.Tb(4,"div",14),n.Tb(5,"user-form",15),n.dc("create",function(t){return n.xc(e),n.fc().onCreate(t)})("update",function(t){return n.xc(e),n.fc().onUpdate(t)}),n.Sb(),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=n.fc();n.Ab(2),n.mc("userPage",e.userPage),n.Ab(3),n.mc("item",e.user)}}let x=(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){this.getUserList(new a.a)}getUserList(e){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.userPage=yield this.service.getList(e).toPromise()}catch(t){this.errorMessage=t}this.loading=!1})}refreshData({page:e,limit:t,sort:s,order:r,search:i}){this.getUserList(new a.a(e,t,s,r,i))}onEdit(e){this.user=this.userPage.docs.find(t=>t._id==e)}onCreate(e){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;try{const t=yield this.service.userRegistration(e).toPromise();this.onClose(),this.message="User created",this.userPage.docs.push(t)}catch(t){this.errorMessage=t}this.loading=!1})}onUpdate(e){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;const t=this.user._id;try{yield this.service.update(t,e).toPromise(),this.onClose(),this.message="User updated",this.getUserList(new a.a)}catch(s){this.errorMessage=s}this.loading=!1})}onActive(e){return Object(c.a)(this,void 0,void 0,function*(){console.log("onActive"+event);try{this.loading=!0;const t=yield this.service.toggleActive(e).toPromise(),s=this.userPage.docs.findIndex(t=>t._id===e);this.userPage.docs.splice(s,1,t),this.loading=!1}catch(t){}})}onClose(){this.user=null,this.loading=!1,this.message="",this.errorMessage=""}}return e.\u0275fac=function(t){return new(t||e)(n.Ob(l.a))},e.\u0275cmp=n.Ib({type:e,selectors:[["app-list"]],decls:8,vars:4,consts:[[1,"container-fluid","component-head"],[1,"container-fluid"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"],[1,"row"],[1,"col-md-7","col-12"],[3,"userPage","edit","refresh","active"],[1,"col-md-5","col-12"],[1,"border","rounded","bg-white"],[3,"item","create","update"]],template:function(e,t){1&e&&(n.Tb(0,"div",0),n.Tb(1,"h3"),n.Ec(2,"Users"),n.Sb(),n.Sb(),n.Tb(3,"div",1),n.Cc(4,I,1,0,"loading",2),n.Cc(5,y,7,1,"div",3),n.Cc(6,P,7,1,"div",4),n.Cc(7,A,6,2,"div",5),n.Sb()),2&e&&(n.Ab(4),n.mc("ngIf",t.loading),n.Ab(1),n.mc("ngIf",t.message.length>0),n.Ab(1),n.mc("ngIf",t.errorMessage.length>0),n.Ab(1),n.mc("ngIf",!t.loading))},directives:[d.o,b.a,f,T],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),e})();var C=s("1kSV"),E=s("fn6H");function k(e,t){if(1&e&&(n.Tb(0,"div",10),n.Pb(1,"form-validator",11),n.Sb()),2&e){const e=n.fc();n.Ab(1),n.mc("form",e.form)}}let U=(()=>{class e extends h.a{constructor(e){super(),this.fb=e,this.createForm()}createForm(){this.form=this.fb.group({password:["",[m.t.required,m.t.minLength(6)]]})}}return e.\u0275fac=function(t){return new(t||e)(n.Ob(m.c))},e.\u0275cmp=n.Ib({type:e,selectors:[["reset-password-form"]],features:[n.xb],decls:14,vars:12,consts:[[1,"navbar","navbar-light","bg-light","border","border-bottom-0"],[1,"navbar-brand"],[1,"p-3","border",3,"formGroup","ngSubmit","mouseleave"],[3,"label","name","showButton"],[3,"fieldId","control"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"disabled"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[3,"form"]],template:function(e,t){1&e&&(n.Tb(0,"nav",0),n.Tb(1,"a",1),n.Ec(2),n.Sb(),n.Sb(),n.Tb(3,"form",2),n.dc("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),n.Pb(4,"form-object-label",3),n.Pb(5,"form-object-label",3),n.Pb(6,"form-password",4),n.Tb(7,"div",5),n.Tb(8,"span",6),n.dc("mouseenter",function(){return t.mouseoverShifting=!0}),n.Tb(9,"button",7),n.Ec(10," Update "),n.Sb(),n.Sb(),n.Tb(11,"button",8),n.dc("click",function(){return t.clean()}),n.Ec(12,"Clear"),n.Sb(),n.Sb(),n.Cc(13,k,2,1,"div",9),n.Sb()),2&e&&(n.Ab(2),n.Gc("Change password of ",null==t.item?null:t.item.name,""),n.Ab(1),n.mc("formGroup",t.form),n.Ab(1),n.mc("label","Name")("name",null==t.item?null:t.item.name)("showButton",!1),n.Ab(1),n.mc("label","Phone")("name",null==t.item?null:t.item.phone)("showButton",!1),n.Ab(1),n.mc("fieldId","password")("control",t.form.get("password")),n.Ab(3),n.mc("disabled",!t.form.valid),n.Ab(4),n.mc("ngIf",t.mouseoverShifting))},directives:[C.i,m.v,m.m,m.f,E.a,v.a,d.o,S.a],styles:[""]}),e})();function M(e,t){1&e&&n.Pb(0,"loading")}function O(e,t){if(1&e){const e=n.Ub();n.Tb(0,"div",6),n.Tb(1,"strong"),n.Ec(2,"Success! "),n.Sb(),n.Ec(3),n.Tb(4,"button",7),n.dc("click",function(){return n.xc(e),n.fc().onClose()}),n.Tb(5,"span",8),n.Ec(6,"\xd7"),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=n.fc();n.Ab(3),n.Gc(" ",e.message," ")}}function L(e,t){if(1&e){const e=n.Ub();n.Tb(0,"div",9),n.Tb(1,"strong"),n.Ec(2,"Failed! "),n.Sb(),n.Ec(3),n.Tb(4,"button",7),n.dc("click",function(){return n.xc(e),n.fc().onClose()}),n.Tb(5,"span",8),n.Ec(6,"\xd7"),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=n.fc();n.Ab(3),n.Gc(" ",e.errorMessage," ")}}function _(e,t){if(1&e){const e=n.Ub();n.Tb(0,"div",14),n.Tb(1,"div",15),n.Tb(2,"reset-password-form",16),n.dc("update",function(t){return n.xc(e),n.fc(2).onPasswordChange(t)}),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=n.fc(2);n.Ab(2),n.mc("item",e.user)}}function G(e,t){if(1&e){const e=n.Ub();n.Tb(0,"div",10),n.Tb(1,"div",11),n.Tb(2,"user-list",12),n.dc("edit",function(t){return n.xc(e),n.fc().onEdit(t)})("refresh",function(t){return n.xc(e),n.fc().refreshData(t)}),n.Sb(),n.Sb(),n.Cc(3,_,3,1,"div",13),n.Sb()}if(2&e){const e=n.fc();n.Ab(2),n.mc("userPage",e.userPage),n.Ab(1),n.mc("ngIf",e.user)}}const j=[{path:"add",component:o},{path:"reset-password",component:(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){this.getUserList(new a.a)}getUserList(e){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.userPage=yield this.service.getList(e).toPromise()}catch(t){this.errorMessage=t}this.loading=!1})}refreshData({page:e,limit:t,sort:s,order:r,search:i}){this.getUserList(new a.a(e,t,s,r,i))}onEdit(e){this.user=this.userPage.docs.find(t=>t._id==e)}onPasswordChange(e){return Object(c.a)(this,void 0,void 0,function*(){this.loading=!0;try{const t=yield this.service.resetPassword(this.user._id,e.password).toPromise();console.log(t),this.message="Password changed"}catch(t){this.errorMessage=t}this.loading=!1})}onClose(){this.user=null,this.loading=!1,this.message="",this.errorMessage=""}}return e.\u0275fac=function(t){return new(t||e)(n.Ob(l.a))},e.\u0275cmp=n.Ib({type:e,selectors:[["app-reset-password"]],decls:8,vars:4,consts:[[1,"container-fluid","component-head"],[1,"container"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"],[1,"row"],[1,"col-md-7","col-12"],[3,"userPage","edit","refresh"],["class","col-md-5 col-12",4,"ngIf"],[1,"col-md-5","col-12"],[1,"border","rounded","bg-white"],[3,"item","update"]],template:function(e,t){1&e&&(n.Tb(0,"div",0),n.Tb(1,"h3"),n.Ec(2,"Change Password"),n.Sb(),n.Sb(),n.Tb(3,"div",1),n.Cc(4,M,1,0,"loading",2),n.Cc(5,O,7,1,"div",3),n.Cc(6,L,7,1,"div",4),n.Cc(7,G,4,2,"div",5),n.Sb()),2&e&&(n.Ab(4),n.mc("ngIf",t.loading),n.Ab(1),n.mc("ngIf",t.message.length>0),n.Ab(1),n.mc("ngIf",t.errorMessage.length>0),n.Ab(1),n.mc("ngIf",!t.loading))},directives:[d.o,b.a,f,U],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),e})()},{path:"",component:x}];let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Mb({type:e}),e.\u0275inj=n.Lb({imports:[[i.a,r.d.forChild(j)]]}),e})()}}]);