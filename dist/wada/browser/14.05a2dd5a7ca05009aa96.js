(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{mico:function(t,e,n){"use strict";n.r(e),n.d(e,"ROUTES",function(){return M}),n.d(e,"ReportsModule",function(){return x});var a=n("tyNb"),s=n("B01t"),r=n("Jkkg"),i=n("mrSG"),o=n("9FRo"),c=n("fXoL"),l=n("/7iW"),d=n("sNvP"),b=n("z3bE"),g=n("ofXK"),u=n("1kSV"),h=n("3Pt+");function f(t,e){if(1&t){const t=c.Ub();c.Rb(0),c.Tb(1,"div",12),c.Tb(2,"button",13),c.dc("click",function(){return c.xc(t),c.fc().adjustDay(-1)}),c.Pb(3,"i",14),c.Sb(),c.Sb(),c.Tb(4,"div",15),c.Tb(5,"div",16),c.Tb(6,"div",17),c.Tb(7,"div",18),c.Ec(8,"Date"),c.Sb(),c.Sb(),c.Tb(9,"input",19,20),c.dc("click",function(){return c.xc(t),c.uc(10).toggle()})("ngModelChange",function(e){return c.xc(t),c.fc().date=e})("dateSelect",function(){return c.xc(t),c.fc().adjustDay(0)}),c.Sb(),c.Tb(11,"div",21),c.Tb(12,"button",22),c.dc("click",function(){return c.xc(t),c.uc(10).toggle()}),c.Pb(13,"i",23),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(14,"div",12),c.Tb(15,"button",13),c.dc("click",function(){return c.xc(t),c.fc().adjustDay(1)}),c.Pb(16,"i",24),c.Sb(),c.Sb(),c.Qb()}if(2&t){const t=c.fc();c.Ab(9),c.mc("ngModel",t.date)}}function m(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",12),c.Tb(1,"div",25),c.Tb(2,"div",17),c.Tb(3,"div",18),c.Ec(4,"Date"),c.Sb(),c.Sb(),c.Tb(5,"input",26),c.dc("selected",function(e){return c.xc(t),c.fc().selectedDate(e)}),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=c.fc();c.Ab(5),c.mc("options",t.options)}}let p=(()=>{class t{constructor(t){this.util=t,this.dateRange=new c.o,this.total=0,this.mode="day",this.itemList=[],this.filteredItemList=[],this.daterange={},this.year=(new Date).getFullYear(),this.date=t.convertJsDateToNgbDate(new Date),this.setDateRanges()}ngOnInit(){this.onModechange(this.mode)}setDateRanges(){this.daterange.endDate=new Date,this.daterange.startDate=new Date,this.daterange.startDate.setDate(this.daterange.startDate.getDate()-20);const t=new Date;t.setDate(this.daterange.startDate.getDate()-90);const e=new Date;e.setDate(this.daterange.startDate.getDate()+23),this.options={autoApply:!0,locale:{format:"DD MMM,YY"},minDate:t,maxDate:e,startDate:this.daterange.startDate,endDate:this.daterange.endDate,alwaysShowCalendars:!1}}onModechange(t){switch(this.mode=t,t){case"day":this.adjustDay(0);break;case"range":this.getItemByDateRange(this.daterange.startDate,this.daterange.endDate,t)}}selectedDate(t){this.daterange.startDate=t.start._d,this.daterange.endDate=t.end._d,this.getItemByDateRange(this.daterange.startDate,this.daterange.endDate,this.mode)}getItemByDateRange(t,e,n){t.setHours(0,0,0,0),e.setHours(23,59,59,999),this.dateRange.emit({start:t,end:e,mode:n})}adjustDay(t){let e=new Date(this.date.year,this.date.month-1,this.date.day+t);this.date=this.util.convertJsDateToNgbDate(e);const n=new Date(this.date.year,this.date.month-1,this.date.day);n.setHours(0,0,0,0);const a=new Date(this.date.year,this.date.month-1,this.date.day);a.setHours(23,59,59,999),this.getItemByDateRange(n,a,this.mode)}getDateString(){return this.date.day+"/"+this.date.month+"/"+this.date.year}getDateRangeString(){return this.util.getDateStringLocal(this.daterange.startDate)+" to "+this.util.getDateStringLocal(this.daterange.endDate)}onPrint(){}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(b.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["report-head"]],inputs:{label:"label"},outputs:{dateRange:"dateRange"},decls:18,vars:5,consts:[[1,"container-fluid","component-head","d-print-none"],[1,"d-flex","justify-content-between","align-items-center"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],[1,"container","py-1","bg-white"],[1,"row","d-print-none"],[4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"col"],[1,"ml-auto","col-auto"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-print"],[1,"col-auto"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"fa","fa-chevron-left"],[1,"col-auto","p-0","mb-2"],[1,"input-group","input-group-sm"],[1,"input-group-prepend"],[1,"input-group-text"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","click","ngModelChange","dateSelect"],["rDate","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"],[1,"fa","fa-chevron-right"],[1,"input-group","input-group-sm","mb-2"],["type","text","name","daterangeInput","daterangepicker","",1,"form-control",3,"options","selected"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"h3"),c.Ec(3),c.Sb(),c.Tb(4,"div",2),c.Tb(5,"a",3),c.dc("click",function(){return e.onModechange("day")}),c.Ec(6,"Day"),c.Sb(),c.Tb(7,"a",3),c.dc("click",function(){return e.onModechange("range")}),c.Ec(8,"Range"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(9,"div",4),c.Tb(10,"div",5),c.Cc(11,f,17,1,"ng-container",6),c.Cc(12,m,6,1,"div",7),c.Pb(13,"div",8),c.Tb(14,"div",9),c.Tb(15,"button",10),c.dc("click",function(){return e.onPrint()}),c.Pb(16,"i",11),c.Ec(17," Print "),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t&&(c.Ab(3),c.Fc(e.label),c.Ab(2),c.mc("ngClass","day"==e.mode?"btn-primary":"btn-light"),c.Ab(2),c.mc("ngClass","range"==e.mode?"btn-primary":"btn-light"),c.Ab(4),c.mc("ngIf","day"==e.mode),c.Ab(1),c.mc("ngIf","range"==e.mode))},directives:[g.m,g.o,u.h,h.a,h.l,h.o,s.b],styles:[""]}),t})();var y=n("HF3I"),D=n("64Du"),v=n("wSIx");let S=(()=>{class t{constructor(){this.tableName="Order Table",this.columns=[{path:"orderNumber",label:"Order Number"},{path:"createdAt",label:"Created",pipe:"date",pipeArgs:"dd/MM/yyyy"},{path:"orderStatus",label:"Order Status"},{path:"paymentStatus",label:"Payment Status"},{path:"paymentMethod",label:"Payment Method",totalLabel:!0},{path:"createdBy.name",label:"Created By"},{path:"total",label:"Total",total:!0}],this.sortColumn={path:"name",order:"asc",limit:8,page:1,search:""}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Ib({type:t,selectors:[["order-table"]],inputs:{orderPage:"orderPage",name:"name"},decls:1,vars:4,consts:[[3,"tableName","columns","sortColumn","data"]],template:function(t,e){1&t&&c.Pb(0,"ng-table",0),2&t&&c.mc("tableName",e.tableName+" of "+e.name)("columns",e.columns)("sortColumn",e.sortColumn)("data",e.orderPage)},directives:[v.a],styles:[""]}),t})();function T(t,e){1&t&&c.Pb(0,"loading")}function I(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",8),c.Tb(1,"strong"),c.Ec(2,"Success! "),c.Sb(),c.Ec(3),c.Tb(4,"button",9),c.dc("click",function(){return c.xc(t),c.fc().onClose()}),c.Tb(5,"span",10),c.Ec(6,"\xd7"),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=c.fc();c.Ab(3),c.Gc(" ",t.message," ")}}function w(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",11),c.Tb(1,"strong"),c.Ec(2,"Failed! "),c.Sb(),c.Ec(3),c.Tb(4,"button",9),c.dc("click",function(){return c.xc(t),c.fc().onClose()}),c.Tb(5,"span",10),c.Ec(6,"\xd7"),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=c.fc();c.Ab(3),c.Gc(" ",t.errMsg," ")}}function R(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",12),c.Tb(1,"user-list",13),c.dc("edit",function(e){return c.xc(t),c.fc().onEdit(e)})("refresh",function(e){return c.xc(t),c.fc().refreshData(e)}),c.Sb(),c.Sb()}if(2&t){const t=c.fc();c.Ab(1),c.mc("userPage",t.userPage)}}function P(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",14),c.Pb(1,"order-table",15),c.Tb(2,"div",16),c.Tb(3,"button",17),c.dc("click",function(){return c.xc(t),c.fc().onClose()}),c.Ec(4,"Close"),c.Sb(),c.Sb(),c.Sb()}if(2&t){const t=c.fc();c.Ab(1),c.mc("orderPage",t.orderPage)("name",t.user.name)}}let k=(()=>{class t{constructor(t,e){this.userService=t,this.service=e,this.label="Customer Report",this.loading=!1,this.message="",this.errMsg=""}ngOnInit(){this.getUserList(new o.a)}getItemByDateRange({start:t,end:e,mode:n}){return Object(i.a)(this,void 0,void 0,function*(){this.options={start:t,end:e,mode:n},console.log(this.options),this.user&&(this.orderPage=yield this.service.customer(this.user._id,t,e).toPromise())})}getUserList(t){return Object(i.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.userPage=yield this.userService.getList(t).toPromise()}catch(e){this.errMsg=e}this.loading=!1})}onEdit(t){this.user=this.userPage.docs.find(e=>e._id==t),this.getItemByDateRange(this.options)}onClose(){this.message="",this.errMsg="",this.loading=!1,this.user=null}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(l.a),c.Ob(d.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-customer"]],decls:8,vars:6,consts:[[3,"label","dateRange"],[1,"container"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],[1,"row"],["class","col-md-7 col-12 bg-white",4,"ngIf"],["class","col-md-12 py-3 bg-white",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"],[1,"col-md-7","col-12","bg-white"],[3,"userPage","edit","refresh"],[1,"col-md-12","py-3","bg-white"],[3,"orderPage","name"],[1,"d-flex","flex-row-reverse","d-print-none"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"report-head",0),c.dc("dateRange",function(t){return e.getItemByDateRange(t)}),c.Sb(),c.Tb(1,"div",1),c.Cc(2,T,1,0,"loading",2),c.Cc(3,I,7,1,"div",3),c.Cc(4,w,7,1,"div",4),c.Tb(5,"div",5),c.Cc(6,R,2,1,"div",6),c.Cc(7,P,5,2,"div",7),c.Sb(),c.Sb()),2&t&&(c.mc("label",e.label),c.Ab(2),c.mc("ngIf",e.loading),c.Ab(1),c.mc("ngIf",e.message.length>0),c.Ab(1),c.mc("ngIf",e.errMsg.length>0),c.Ab(2),c.mc("ngIf",!e.loading&&!e.user),c.Ab(1),c.mc("ngIf",e.user&&!e.loading&&(null==e.orderPage?null:e.orderPage.docs.length)>0))},directives:[p,g.o,y.a,D.a,S],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),t})(),C=(()=>{class t{constructor(){this.label="Delivery Report"}ngOnInit(){}getItemByDateRange(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Ib({type:t,selectors:[["app-delivery"]],decls:1,vars:1,consts:[[3,"label","dateRange"]],template:function(t,e){1&t&&(c.Tb(0,"report-head",0),c.dc("dateRange",function(t){return e.getItemByDateRange(t)}),c.Sb()),2&t&&c.mc("label",e.label)},directives:[p],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),t})();const M=[{path:"customer",component:k},{path:"sales",component:(()=>{class t{constructor(){this.label="Sales Report"}ngOnInit(){}getItemByDateRange(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Ib({type:t,selectors:[["app-sales"]],decls:1,vars:1,consts:[[3,"label","dateRange"]],template:function(t,e){1&t&&(c.Tb(0,"report-head",0),c.dc("dateRange",function(t){return e.getItemByDateRange(t)}),c.Sb()),2&t&&c.mc("label",e.label)},directives:[p],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),t})()},{path:"delivery",component:C},{path:"transaction",component:(()=>{class t{constructor(){this.label="Transaction Report"}ngOnInit(){}getItemByDateRange(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Ib({type:t,selectors:[["app-transaction"]],decls:1,vars:1,consts:[[3,"label","dateRange"]],template:function(t,e){1&t&&(c.Tb(0,"report-head",0),c.dc("dateRange",function(t){return e.getItemByDateRange(t)}),c.Sb()),2&t&&c.mc("label",e.label)},directives:[p],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({imports:[[r.a,s.a,a.d.forChild(M)]]}),t})()}}]);