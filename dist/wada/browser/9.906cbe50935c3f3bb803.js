(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"/ZIw":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("rd51"),o=r("5zru"),s=r("fXoL"),i=r("ofXK");function c(e,t){if(1&e&&(s.Rb(0),s.Tb(1,"small",1),s.Ec(2),s.Sb(),s.Qb()),2&e){const e=s.fc();s.Ab(2),s.Fc(e.errorMessage)}}let a=(()=>{class e{constructor(){this.form=null,this.errorMessage=null}ngOnChanges(e){this.errorMessage=this.getFormValidationErrors()}getFormValidationErrors(){let e="";return Object.keys(this.form.controls).forEach(t=>{const r=this.form.get(t).errors;null!=r&&Object.keys(r).forEach(r=>{e+=n.a[t]+("required"==r?o.e:"pattern"==r?o.c:"maxlength"==r?" : Max Length error":"minlength"==r?" : Min Length error":"Unknown")+"; "})}),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["form-validator"]],inputs:{form:"form"},features:[s.yb],decls:1,vars:1,consts:[[4,"ngIf"],["id","nameHelp",1,"form-text","text-danger"]],template:function(e,t){1&e&&s.Cc(0,c,3,1,"ng-container",0),2&e&&s.mc("ngIf",t.errorMessage)},directives:[i.o],styles:[""]}),e})()},"5zru":function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"e",function(){return s}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return c});const n="Emain pattern error",o="Only cyrillic",s=" Required",i=" Pattern error",c="Phone number should be like 01843747875 "},"I/JT":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("fXoL");let o=(()=>{class e{constructor(){this.err="",this.create=new n.o,this.update=new n.o,this.delete=new n.o,this.exists=!1,this.mouseoverShifting=!1}ngOnChanges(e){e.item&&null!=this.item&&(this.form.reset(),this.exists=!0,this.form.patchValue(this.item))}submit(){this.err="",this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.clean())}onDelete(){this.delete.emit(this.item._id),this.clean()}clean(){this.exists=!1,this.item=null,this.err="",this.form.reset()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Ib({type:e,selectors:[["base-form"]],inputs:{item:"item",err:"err"},outputs:{create:"create",update:"update",delete:"delete"},features:[n.yb],decls:2,vars:0,template:function(e,t){1&e&&(n.Tb(0,"p"),n.Ec(1,"base-form works!"),n.Sb())},styles:[""]}),e})()},I9cL:function(e,t,r){"use strict";r.r(t),r.d(t,"ROUTES",function(){return Ee}),r.d(t,"InventoryModule",function(){return Ae});var n=r("tyNb"),o=r("KZX/"),s=r("mrSG"),i=r("fXoL"),c=r("JrkW"),a=r("ofXK"),l=r("3Pt+"),b=r("LRne"),u=r("Kj3r"),d=r("/uUt"),h=r("eIep"),m=r("JIr8"),f=r("lJxs"),p=r("msxj"),g=r("I/JT"),v=r("9FRo"),y=r("NuOk"),S=r("/7iW"),T=r("1kSV"),I=r("gpvV"),P=r("CEEh"),w=r("wOd6");function E(e,t){if(1&e&&i.Pb(0,"ngb-highlight",9),2&e){const e=t.result,r=t.term,n=i.fc();i.mc("result",n.getProductName(e))("term",r)}}function A(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div"),i.Tb(1,"div",10),i.Tb(2,"div",4),i.Tb(3,"div",6),i.Tb(4,"label",11),i.Ec(5),i.Sb(),i.Sb(),i.Tb(6,"div",5),i.Pb(7,"input",12),i.Sb(),i.Tb(8,"div",13),i.Pb(9,"input",14),i.Sb(),i.Tb(10,"div",13),i.Tb(11,"input",15),i.dc("change",function(){return i.xc(e),i.fc().updateTotal()}),i.Sb(),i.Sb(),i.Tb(12,"div",16),i.Tb(13,"label",8),i.Ec(14),i.Sb(),i.Sb(),i.Tb(15,"div",6),i.Tb(16,"button",17),i.dc("click",function(){i.xc(e);const r=t.index;return i.fc().onRemoveItem(r)}),i.Pb(17,"i",18),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=t.index,r=i.fc();i.Ab(1),i.mc("formGroupName",e),i.Ab(4),i.Gc("",e+1," "),i.Ab(2),i.mc("ngbTypeahead",r.searchProduct)("editable",!1)("resultFormatter",r.productFormatter)("inputFormatter",r.productFormatter),i.Ab(2),i.oc("placeholder","Quantity ",e+1,""),i.Ab(2),i.oc("placeholder","Purchase price ",e+1,""),i.Ab(3),i.Fc(r.parent.value.items[e].quantity*r.parent.value.items[e].purchase_price)}}let C=(()=>{class e{constructor(e){this.productService=e,this.removeItem=new i.o,this.total=0,this.searchProduct=e=>e.pipe(Object(u.a)(300),Object(d.a)(),Object(h.a)(e=>e.length<3?[]:this.productService.getList(new v.a(1,10,"name","asc",e)).pipe(Object(m.a)(()=>Object(b.a)([])))),Object(f.a)(e=>e?e.docs:[])),this.productFormatter=e=>{if(e)return`${e.name} [S: ${e.size}] [P: ${e.price}]`}}ngOnInit(){}getProductName(e){if(e)return`${e.name} [S: ${e.size}] [P: ${e.price}]`}onRemoveItem(e){this.removeItem.emit(e)}updateTotal(){const e=this.parent.get("items");let t=0;for(let r=0;r<e.length;r++)t+=e.value[r].quantity*e.value[r].purchase_price;this.total=t}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(w.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["inventory-item-form"]],inputs:{parent:"parent"},outputs:{removeItem:"removeItem"},decls:17,vars:3,consts:[["rt",""],[3,"formGroup"],["formArrayName","items"],[4,"ngFor","ngForOf"],[1,"form-row"],[1,"col"],[1,"col-auto"],[1,"col-1","text-right"],[1,"form-control","form-control-sm","text-right"],[3,"result","term"],[3,"formGroupName"],[1,"form-control","form-control-sm"],["id","supplierId","type","text","formControlName","product","placeholder","Product name / barcode",1,"form-control","form-control-sm",3,"ngbTypeahead","editable","resultFormatter","inputFormatter"],[1,"col-2"],["type","number","formControlName","quantity","id","quantity",1,"form-control","form-control-sm",3,"placeholder"],["type","number","formControlName","purchase_price","id","purchase_price",1,"form-control","form-control-sm",3,"placeholder","change"],[1,"col-1"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash-o"]],template:function(e,t){1&e&&(i.Cc(0,E,1,2,"ng-template",null,0,i.Dc),i.Tb(2,"div",1),i.Tb(3,"div",2),i.Cc(4,A,18,9,"div",3),i.Tb(5,"div",4),i.Tb(6,"div",5),i.Pb(7,"strong"),i.Sb(),i.Tb(8,"div",6),i.Tb(9,"strong"),i.Ec(10," Total"),i.Sb(),i.Sb(),i.Tb(11,"div",7),i.Tb(12,"label",8),i.Tb(13,"strong"),i.Ec(14),i.Sb(),i.Sb(),i.Sb(),i.Tb(15,"div",6),i.Ec(16," \xa0 \xa0 \xa0 \xa0 "),i.Sb(),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Ab(2),i.mc("formGroup",t.parent),i.Ab(2),i.mc("ngForOf",t.parent.controls.items.controls),i.Ab(10),i.Gc(" ",t.total,""))},directives:[l.m,l.f,l.b,a.n,T.g,l.g,l.a,T.m,l.l,l.e,l.q],styles:[""]}),e})();var x=r("/ZIw");function k(e,t){1&e&&(i.Tb(0,"small",25),i.Ec(1,"Warehouse Required"),i.Sb())}function O(e,t){1&e&&(i.Tb(0,"small",25),i.Ec(1,"Supplier Required"),i.Sb())}function q(e,t){if(1&e&&(i.Tb(0,"div",26),i.Pb(1,"form-validator",27),i.Sb()),2&e){const e=i.fc();i.Ab(1),i.mc("form",e.form)}}let F=(()=>{class e extends g.a{constructor(e,t,r){super(),this.fb=e,this.warehouseService=t,this.userService=r,this.inventoryTypes=p.c,this.searchWarehouse=e=>e.pipe(Object(u.a)(300),Object(d.a)(),Object(h.a)(e=>e.length<3?[]:this.warehouseService.getList(new v.a(1,10,"name","asc",e)).pipe(Object(m.a)(()=>Object(b.a)([])))),Object(f.a)(e=>e?e.docs:[])),this.searchUser=e=>e.pipe(Object(u.a)(300),Object(d.a)(),Object(h.a)(e=>e.length<3?[]:this.userService.getList(new v.a(1,10,"name","asc",e)).pipe(Object(m.a)(()=>Object(b.a)([])))),Object(f.a)(e=>e?e.docs:[])),this.warehouseFormatter=e=>{if(e)return`${e.name} [${e.admin.name}]`},this.userFormatter=e=>{if(e)return`${e.name}  [${e.phone}]`},this.createForm()}createForm(){this.form=this.fb.group({reference:["",l.t.required],inventoryType:["in",l.t.required],warehouse:["",l.t.required],supplier:["",l.t.required],items:this.fb.array([this.createInventoryItem()])})}createInventoryItem(){return this.fb.group({product:["",l.t.required],quantity:[1,l.t.required],purchase_price:[0,l.t.required]})}pushInventoryItem(){this.form.get("items").push(this.createInventoryItem())}onRemoveInventoryItem(e){this.form.get("items").removeAt(e)}clean(){this.form.get("items").clear(),super.clean(),this.pushInventoryItem()}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(l.c),i.Ob(y.a),i.Ob(S.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["inventory-form"]],features:[i.xb],decls:36,vars:21,consts:[[1,"border"],[1,"navbar","navbar-light","bg-light"],[1,"form-head"],["type","button","routerLink","/dashboard/inventory",1,"btn","btn-primary","btn-sm"],[1,"fa","fa-list"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[1,"form-row"],[1,"col-md-6"],[3,"fieldId","control"],[3,"fieldId","control","options"],["for","warehouse",1,"d-none","d-sm-block","col-form-label","col-form-label-sm","p-0"],["id","warehouse","type","text","formControlName","warehouse","placeholder","Warehouse name",1,"form-control","form-control-sm",3,"ngbTypeahead","resultFormatter","inputFormatter","editable"],["class","form-text text-danger",4,"ngIf"],["for","supplier",1,"d-none","d-sm-block","col-form-label","col-form-label-sm","p-0"],["id","supplier","type","text","formControlName","supplier","placeholder","Supplier name / phone",1,"form-control","form-control-sm",3,"ngbTypeahead","resultFormatter","inputFormatter","editable"],[1,"row"],[1,"col-md-12","my-3"],[3,"parent","removeItem"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-plus"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"disabled"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"form-text","text-danger"],[1,"text-danger"],[3,"form"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"div",1),i.Tb(2,"div",2),i.Ec(3),i.Sb(),i.Tb(4,"a",3),i.Pb(5,"i",4),i.Ec(6," Inventory List "),i.Sb(),i.Sb(),i.Tb(7,"form",5),i.dc("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),i.Tb(8,"div",6),i.Tb(9,"div",7),i.Pb(10,"form-input",8),i.Sb(),i.Tb(11,"div",7),i.Pb(12,"form-select",9),i.Sb(),i.Tb(13,"div",7),i.Tb(14,"label",10),i.Ec(15,"Warehouse*"),i.Sb(),i.Pb(16,"input",11),i.Cc(17,k,2,0,"small",12),i.Sb(),i.Tb(18,"div",7),i.Tb(19,"label",13),i.Ec(20,"Supplier*"),i.Sb(),i.Pb(21,"input",14),i.Cc(22,O,2,0,"small",12),i.Sb(),i.Sb(),i.Tb(23,"div",15),i.Tb(24,"div",16),i.Tb(25,"inventory-item-form",17),i.dc("removeItem",function(e){return t.onRemoveInventoryItem(e)}),i.Sb(),i.Tb(26,"button",18),i.dc("click",function(){return t.pushInventoryItem()}),i.Pb(27,"i",19),i.Ec(28," Add Item "),i.Sb(),i.Sb(),i.Sb(),i.Tb(29,"div",20),i.Tb(30,"span",21),i.dc("mouseenter",function(){return t.mouseoverShifting=!0}),i.Tb(31,"button",22),i.Ec(32),i.Sb(),i.Sb(),i.Tb(33,"button",23),i.dc("click",function(){return t.clean()}),i.Ec(34,"Clear"),i.Sb(),i.Sb(),i.Cc(35,q,2,1,"div",24),i.Sb(),i.Sb()),2&e&&(i.Ab(3),i.Gc(" ",t.exists?"Update":"New"," Inventory "),i.Ab(4),i.mc("formGroup",t.form),i.Ab(3),i.mc("fieldId","reference")("control",t.form.get("reference")),i.Ab(2),i.mc("fieldId","inventoryType")("control",t.form.get("inventoryType"))("options",t.inventoryTypes),i.Ab(4),i.mc("ngbTypeahead",t.searchWarehouse)("resultFormatter",t.warehouseFormatter)("inputFormatter",t.warehouseFormatter)("editable",!1),i.Ab(1),i.mc("ngIf",t.form.controls.warehouse.errors&&t.form.controls.warehouse.touched),i.Ab(4),i.mc("ngbTypeahead",t.searchUser)("resultFormatter",t.userFormatter)("inputFormatter",t.userFormatter)("editable",!1),i.Ab(1),i.mc("ngIf",t.form.controls.supplier.errors&&t.form.controls.supplier.touched),i.Ab(3),i.mc("parent",t.form),i.Ab(6),i.mc("disabled",!t.form.valid),i.Ab(1),i.Fc(t.exists?"Update":"Save"),i.Ab(3),i.mc("ngIf",t.mouseoverShifting))},directives:[T.k,n.c,l.v,l.m,l.f,I.a,P.a,l.a,T.m,l.l,l.e,a.o,C,x.a],styles:[""]}),e})();var M=r("HF3I");function _(e,t){1&e&&i.Pb(0,"loading")}function j(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",8),i.Tb(1,"strong"),i.Ec(2,"Success! "),i.Sb(),i.Ec(3),i.Tb(4,"button",9),i.dc("click",function(){return i.xc(e),i.fc().onClose()}),i.Tb(5,"span",10),i.Ec(6,"\xd7"),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(3),i.Gc(" ",e.message," ")}}function N(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",11),i.Tb(1,"strong"),i.Ec(2,"Failed! "),i.Sb(),i.Ec(3),i.Tb(4,"button",9),i.dc("click",function(){return i.xc(e),i.fc().onClose()}),i.Tb(5,"span",10),i.Ec(6,"\xd7"),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(3),i.Gc(" ",e.errorMessage," ")}}let R=(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){}onCreateInventory(e){return Object(s.a)(this,void 0,void 0,function*(){const t=this.inventoryObjectToSend(e);try{this.loading=!0;const e=yield this.service.create(t).toPromise();console.log(e),this.loading=!1}catch(r){console.log(r),this.errorMessage=r}})}inventoryObjectToSend(e){const t={inventoryType:e.inventoryType,reference:e.reference,warehouseId:e.warehouse._id,supplierId:e.supplier._id,items:[]};for(let r of e.items)t.items.push({productId:r.product._id,quantity:r.quantity,purchase_price:r.purchase_price});return t}onClose(){this.loading=!1,this.errorMessage="",this.message=""}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(c.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-add"]],decls:10,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container","bg-white"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],[1,"row"],[1,"col-12","mb-5"],[3,"create"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"h3"),i.Ec(2,"Add Inventory"),i.Sb(),i.Sb(),i.Tb(3,"div",1),i.Cc(4,_,1,0,"loading",2),i.Cc(5,j,7,1,"div",3),i.Cc(6,N,7,1,"div",4),i.Tb(7,"div",5),i.Tb(8,"div",6),i.Tb(9,"inventory-form",7),i.dc("create",function(e){return t.onCreateInventory(e)}),i.Sb(),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Ab(4),i.mc("ngIf",t.loading),i.Ab(1),i.mc("ngIf",t.message.length>0),i.Ab(1),i.mc("ngIf",t.errorMessage.length>0))},directives:[a.o,F,M.a],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),e})(),U=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["app-convert"]],decls:2,vars:0,template:function(e,t){1&e&&(i.Tb(0,"p"),i.Ec(1,"convert works!"),i.Sb())},styles:[""]}),e})();var L=r("uEz7");function D(e,t){if(1&e){const e=i.Ub();i.Tb(0,"li",4),i.dc("click",function(){i.xc(e);const r=t.$implicit;return i.fc().onSelectWarehouse(r)}),i.Ec(1),i.Sb()}if(2&e){const e=t.$implicit;i.Ab(1),i.Hc(" ",e.name," [",null==e||null==e.admin?null:e.admin.phone,"]")}}function G(e,t){if(1&e){const e=i.Ub();i.Tb(0,"pagination",5),i.dc("paginate",function(t){return i.xc(e),i.fc().refreshWarehouseData(t)}),i.Sb()}if(2&e){const e=i.fc();i.mc("page",e.warehousePage)("short",!0)}}let W=(()=>{class e{constructor(e){this.warehouseService=e,this.select=new i.o,this.loading=!1}ngOnInit(){this.getWarehouseList(new v.a)}getWarehouseList(e){return Object(s.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.warehousePage=yield this.warehouseService.getList(e).toPromise()}catch(t){console.log(t)}this.loading=!1})}refreshWarehouseData({page:e,limit:t,sort:r,order:n,search:o}){this.getWarehouseList(new v.a(e,t,r,n,o))}onSelectWarehouse(e){this.select.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(y.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["warehouse-side-list"]],outputs:{select:"select"},decls:8,vars:2,consts:[[1,"list-group","mb-1"],[1,"list-group-item","disabled"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[3,"page","short","paginate",4,"ngIf"],[1,"list-group-item",3,"click"],[3,"page","short","paginate"]],template:function(e,t){1&e&&(i.Tb(0,"ul",0),i.Tb(1,"li",1),i.Ec(2,"Please select a "),i.Tb(3,"strong"),i.Ec(4," Warehouse "),i.Sb(),i.Ec(5," from list below"),i.Sb(),i.Cc(6,D,2,2,"li",2),i.Sb(),i.Cc(7,G,1,2,"pagination",3)),2&e&&(i.Ab(6),i.mc("ngForOf",null==t.warehousePage?null:t.warehousePage.docs),i.Ab(1),i.mc("ngIf",(null==t.warehousePage?null:t.warehousePage.totalPages)>1))},directives:[a.n,a.o,L.a],styles:[".list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}"]}),e})();var z=r("wSIx");let $=(()=>{class e{constructor(){this.details=new i.o,this.refresh=new i.o,this.tableName="Inventory Table",this.columns=[{path:"updatedAt",label:"Updated",pipe:"date",pipeArgs:"dd/MM/yyyy"},{path:"reference",label:"Reference"},{path:"inventoryType",label:"Inventory Type"},{path:"items.length",label:"Number of Products"},{key:"_id",type:"button",content:e=>({classname:"edit_link",text:"Details",link:"#",event:{key:"details",id:e._id}})}],this.sortColumn={path:"name",order:"asc",limit:8,page:1,search:""}}buttonEvent(e){switch(e.key){case"details":this.details.emit(e.id)}}onRefresh(e){this.sortColumn=Object.assign({},e),this.refresh.emit(Object.assign({sort:e.path},e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["inventory-list"]],inputs:{inventoryPage:"inventoryPage"},outputs:{details:"details",refresh:"refresh"},decls:1,vars:4,consts:[[3,"tableName","columns","sortColumn","data","refresh","btnEvent"]],template:function(e,t){1&e&&(i.Tb(0,"ng-table",0),i.dc("refresh",function(e){return t.onRefresh(e)})("btnEvent",function(e){return t.buttonEvent(e)}),i.Sb()),2&e&&i.mc("tableName",t.tableName)("columns",t.columns)("sortColumn",t.sortColumn)("data",t.inventoryPage)},directives:[z.a],styles:["[_nghost-%COMP%]{display:block;padding:30px}"],changeDetection:0}),e})();function B(e,t){if(1&e&&(i.Tb(0,"div",7),i.Tb(1,"label",14),i.Ec(2,"Supplier: "),i.Sb(),i.Tb(3,"label",15),i.Ec(4),i.Sb(),i.Sb()),2&e){const e=i.fc();i.Ab(4),i.Hc("",null==e.inventory||null==e.inventory.supplier?null:e.inventory.supplier.name,"[",null==e.inventory||null==e.inventory.supplier?null:e.inventory.supplier.phone,"]")}}function X(e,t){if(1&e&&(i.Tb(0,"div",7),i.Tb(1,"label",14),i.Ec(2,"From Storehouse: "),i.Sb(),i.Tb(3,"label",15),i.Ec(4),i.Sb(),i.Sb()),2&e){const e=i.fc();i.Ab(4),i.Fc(null==e.inventory||null==e.inventory.from?null:e.inventory.from.name)}}function V(e,t){if(1&e&&(i.Tb(0,"tr"),i.Tb(1,"td"),i.Ec(2),i.Sb(),i.Tb(3,"td"),i.Ec(4),i.Sb(),i.Tb(5,"td"),i.Ec(6),i.Sb(),i.Tb(7,"td"),i.Ec(8),i.gc(9,"currency"),i.Sb(),i.Tb(10,"td",18),i.Ec(11),i.gc(12,"currency"),i.Sb(),i.Sb()),2&e){const e=t.$implicit,r=t.index;i.Ab(2),i.Fc(r+1),i.Ab(2),i.Fc(null==e||null==e.product?null:e.product.slug),i.Ab(2),i.Fc(null==e?null:e.quantity),i.Ab(2),i.Fc(i.jc(9,5,null==e?null:e.purchase_price,"BDT","symbol-narrow")),i.Ab(3),i.Fc(i.jc(12,9,(null==e?null:e.quantity)*(null==e?null:e.purchase_price),"BDT","symbol-narrow"))}}let H=(()=>{class e{constructor(){}ngOnChanges(e){if(e&&this.inventory){let e=0,t=0;for(let r=0;r<this.inventory.items.length;r++){const n=this.inventory.items[r];e+=n.quantity,t+=n.purchase_price*n.quantity}this.total={price:t,quantity:e}}}onPrint(){window.print()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["inventory-details"]],inputs:{inventory:"inventory"},features:[i.yb],decls:72,vars:18,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["routerLink","//dashboard/inventory/add",1,"btn","btn-success","btn-sm","mx-1"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-primary","mx-1",3,"click"],[1,"fa","fa-print"],[1,"form-group","row","m-0","border"],[1,"col-sm-6","p-0"],["for","createdAt",1,"col-auto","col-form-label"],["id","createdAt",1,"col-form-label"],[1,"form-group","row","border","border-top-0","m-0"],["for","createdBy",1,"col-auto","col-form-label"],["id","createdBy",1,"col-form-label"],[1,"form-group","row","border","border-top-0","m-0","mb-3"],["for","shop",1,"col-auto","col-form-label"],["id","shop",1,"col-form-label"],["class","col-sm-6 p-0",4,"ngIf"],[1,"table","table-hover","table-bordered","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","5"]],template:function(e,t){1&e&&(i.Tb(0,"nav",0),i.Tb(1,"a",1),i.Ec(2,"Inventory Details"),i.Sb(),i.Tb(3,"div"),i.Tb(4,"a",2),i.Pb(5,"i",3),i.Ec(6," ADD Inventory "),i.Sb(),i.Tb(7,"button",4),i.dc("click",function(){return t.onPrint()}),i.Pb(8,"i",5),i.Ec(9," Print"),i.Sb(),i.Sb(),i.Sb(),i.Tb(10,"div",6),i.Tb(11,"div",7),i.Tb(12,"label",8),i.Ec(13,"Ref:"),i.Sb(),i.Tb(14,"label",9),i.Ec(15),i.Sb(),i.Sb(),i.Tb(16,"div",7),i.Tb(17,"label",8),i.Ec(18,"Inventory Type:"),i.Sb(),i.Tb(19,"label",9),i.Ec(20),i.Sb(),i.Sb(),i.Sb(),i.Tb(21,"div",10),i.Tb(22,"div",7),i.Tb(23,"label",8),i.Ec(24,"Updated at: "),i.Sb(),i.Tb(25,"label",9),i.Ec(26),i.gc(27,"date"),i.Sb(),i.Sb(),i.Tb(28,"div",7),i.Tb(29,"label",11),i.Ec(30,"Updated by: "),i.Sb(),i.Tb(31,"label",12),i.Ec(32),i.Sb(),i.Sb(),i.Sb(),i.Tb(33,"div",13),i.Tb(34,"div",7),i.Tb(35,"label",14),i.Ec(36,"Storehouse: "),i.Sb(),i.Tb(37,"label",15),i.Ec(38),i.Sb(),i.Sb(),i.Cc(39,B,5,2,"div",16),i.Cc(40,X,5,1,"div",16),i.Sb(),i.Tb(41,"table",17),i.Tb(42,"thead"),i.Tb(43,"tr"),i.Tb(44,"th"),i.Ec(45,"Sl"),i.Sb(),i.Tb(46,"th"),i.Ec(47,"Product"),i.Sb(),i.Tb(48,"th"),i.Ec(49,"Quantity"),i.Sb(),i.Tb(50,"th"),i.Ec(51,"Purchase Rate"),i.Sb(),i.Tb(52,"th",18),i.Ec(53,"Amount"),i.Sb(),i.Sb(),i.Sb(),i.Tb(54,"tbody"),i.Cc(55,V,13,13,"tr",19),i.Tb(56,"tr"),i.Pb(57,"td",20),i.Sb(),i.Sb(),i.Tb(58,"tfoot"),i.Tb(59,"tr"),i.Pb(60,"td"),i.Tb(61,"td"),i.Tb(62,"strong"),i.Ec(63," Grand Total"),i.Sb(),i.Sb(),i.Tb(64,"td"),i.Tb(65,"strong"),i.Ec(66),i.Sb(),i.Sb(),i.Pb(67,"td"),i.Tb(68,"td",18),i.Tb(69,"strong"),i.Ec(70),i.gc(71,"currency"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Ab(15),i.Fc(null==t.inventory?null:t.inventory.reference),i.Ab(5),i.Fc(null==t.inventory?null:t.inventory.inventoryType),i.Ab(6),i.Fc(i.ic(27,11,null==t.inventory?null:t.inventory.updatedAt,"medium")),i.Ab(6),i.Hc("",null==t.inventory||null==t.inventory.updatedBy?null:t.inventory.updatedBy.name,"[",null==t.inventory||null==t.inventory.updatedBy?null:t.inventory.updatedBy.phone,"]"),i.Ab(6),i.Fc(null==t.inventory||null==t.inventory.warehouse?null:t.inventory.warehouse.name),i.Ab(1),i.mc("ngIf",null==t.inventory?null:t.inventory.supplier),i.Ab(1),i.mc("ngIf",null==t.inventory?null:t.inventory.from),i.Ab(15),i.mc("ngForOf",null==t.inventory?null:t.inventory.items),i.Ab(11),i.Gc(" ",null==t.total?null:t.total.quantity," "),i.Ab(4),i.Fc(i.jc(71,14,null==t.total?null:t.total.price,"BDT","symbol-narrow")))},directives:[T.k,n.c,a.o,a.n],pipes:[a.f,a.d],styles:["[_nghost-%COMP%]{display:block;padding:30px}.tbrow[_ngcontent-%COMP%]:hover{background-color:#81ffd3}"]}),e})();function J(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",7),i.Tb(1,"inventory-list",8),i.dc("details",function(t){return i.xc(e),i.fc().onDetails(t)})("refresh",function(t){i.xc(e);const r=i.fc();return r.refreshInventoryData(null==r.warehouse?null:r.warehouse._id,t)}),i.Sb(),i.Tb(2,"button",9),i.dc("click",function(){return i.xc(e),i.fc().onClose("list")}),i.Ec(3,"Close"),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(1),i.mc("inventoryPage",e.inventoryPage)}}function K(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",7),i.Pb(1,"inventory-details",10),i.Tb(2,"button",9),i.dc("click",function(){return i.xc(e),i.fc().onClose("details")}),i.Ec(3,"Close"),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(1),i.mc("inventory",e.inventory)}}let Q=(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.message="",this.errorMessage=""}onWarehouseSelect(e){this.warehouse=e,this.getInventoryByWarehouseId(e._id,new v.a)}getInventoryByWarehouseId(e,t){return Object(s.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.inventoryPage=yield this.service.byWarehouseId(e,t).toPromise()}catch(r){this.errorMessage=r}this.loading=!1})}refreshInventoryData(e,{page:t,limit:r,sort:n,order:o,search:s}){this.getInventoryByWarehouseId(e,new v.a(t,r,n,o,s))}onDetails(e){this.inventory=this.inventoryPage.docs.find(t=>t._id===e)}onClose(e){switch(e){case"details":this.inventory=null;break;case"list":this.inventoryPage=null,this.warehouse=null}}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(c.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-index"]],decls:11,vars:3,consts:[[1,"container-fluid","component-head","d-print-none"],[1,"form-head","d-none","d-print-block","m-3"],[1,"container"],[1,"row"],[1,"col-md-3","d-print-none"],[3,"select"],["class","col bg-white pb-3",4,"ngIf"],[1,"col","bg-white","pb-3"],[3,"inventoryPage","details","refresh"],[1,"btn","btn-sm","btn-danger","d-print-none","float-right",3,"click"],[3,"inventory"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"h3"),i.Ec(2,"Inventory List"),i.Sb(),i.Sb(),i.Tb(3,"div",1),i.Ec(4),i.Sb(),i.Tb(5,"div",2),i.Tb(6,"div",3),i.Tb(7,"div",4),i.Tb(8,"warehouse-side-list",5),i.dc("select",function(e){return t.onWarehouseSelect(e)}),i.Sb(),i.Sb(),i.Cc(9,J,4,1,"div",6),i.Cc(10,K,4,1,"div",6),i.Sb(),i.Sb()),2&e&&(i.Ab(4),i.Gc(" ",null==t.warehouse?null:t.warehouse.name," Warehouse Inventory list\n"),i.Ab(5),i.mc("ngIf",t.inventoryPage&&!t.inventory),i.Ab(1),i.mc("ngIf",t.inventory))},directives:[W,a.o,$,H],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),e})();var Z=r("tk/3"),Y=r("uWAI");let ee=(()=>{class e{constructor(e){this.dataSource=e,this.storehouseUrl="api/storehouse",this.storehouseLink=this.dataSource.baseUrl+this.storehouseUrl}create(e){return this.dataSource.sendRequest("POST",this.storehouseUrl,e,!0,null)}update(e,t){return this.dataSource.sendRequest("PUT",this.storehouseUrl+`/${e}`,t,!0,null)}getAll(e,t,r,n){const o=this.generateParam(e,t,r,n);return this.dataSource.sendRequest("GET",this.storehouseUrl,null,!1,o)}get(e){return this.dataSource.sendRequest("GET",this.storehouseUrl+`/${e}`,null,!1,null)}search(e){const t=(new Z.d).set("param",e);return this.dataSource.sendRequest("GET",this.storehouseUrl+"/search",null,!1,t)}generateParam(e,t,r,n){return(new Z.d).set("page",e.toString()).set("limit",t.toString()).set("sort",r).set("order",n)}}return e.\u0275fac=function(t){return new(t||e)(i.ac(Y.a))},e.\u0275prov=i.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function te(e,t){if(1&e){const e=i.Ub();i.Tb(0,"li",13),i.dc("click",function(){i.xc(e);const r=t.$implicit;return i.fc(2).onSelectStorehouse(r._id)}),i.Ec(1),i.Sb()}if(2&e){const e=t.$implicit;i.Ab(1),i.Hc(" ",e.name,"[",e.storekeeper_number,"]")}}function re(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",8),i.Tb(1,"ul",9),i.Tb(2,"li",10),i.Ec(3,"Please select a "),i.Tb(4,"strong"),i.Ec(5," Storehouse from List "),i.Sb(),i.Sb(),i.Cc(6,te,2,2,"li",11),i.Sb(),i.Tb(7,"pagination",12),i.dc("paginate",function(t){return i.xc(e),i.fc().onChangeStorehousePage(t)}),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(6),i.mc("ngForOf",e.storehousePage.docs),i.Ab(1),i.mc("page",e.storehousePage)("small",!0)}}function ne(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",14),i.Tb(1,"inventory-list",15),i.dc("details",function(t){return i.xc(e),i.fc().onDetails(t)}),i.Sb(),i.Tb(2,"pagination",12),i.dc("paginate",function(t){i.xc(e);const r=i.fc();return r.onChangeInventoryPage(null==r.storehouse?null:r.storehouse._id,t)}),i.Sb(),i.Tb(3,"button",16),i.dc("click",function(){return i.xc(e),i.fc().onClose("list")}),i.Ec(4,"Close"),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(1),i.mc("inventoryPage",e.inventoryPage),i.Ab(1),i.mc("page",e.inventoryPage)("small",!0)}}function oe(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",17),i.Pb(1,"inventory-details",18),i.Tb(2,"button",19),i.dc("click",function(){return i.xc(e),i.fc().onClose("details")}),i.Ec(3,"Close"),i.Sb(),i.Tb(4,"button",20),i.dc("click",function(){i.xc(e);const t=i.fc();return t.onApprove(t.inventory._id)}),i.Ec(5,"Approve"),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(1),i.mc("inventory",e.inventory)}}function se(e,t){1&e&&i.Pb(0,"loading")}let ie=(()=>{class e{constructor(e,t){this.storehouseService=e,this.inventoryService=t,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){this.getAllStorehouse()}getAllStorehouse(e=1,t=8,r="priority",n="asc"){return Object(s.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.storehousePage=yield this.storehouseService.getAll(e,t,r,n).toPromise()}catch(o){this.errorMessage=o}this.loading=!1})}onChangeStorehousePage(e){this.getAllStorehouse(e.pageNumber,e.limit,e.sort,e.order)}onSelectStorehouse(e){const t=this.storehousePage.docs.find(t=>t._id==e);this.storehouse=Object.assign({},t),this.getAllUnapprovedInventories(e)}getAllUnapprovedInventories(e,t=1,r=8,n="priority",o="asc"){return Object(s.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.inventoryPage=yield this.inventoryService.getUnapprovedInventories(e,t,r,n,o).toPromise()}catch(s){this.errorMessage=s}this.loading=!1})}onChangeInventoryPage(e,t){this.getAllUnapprovedInventories(e,t.pageNumber,t.limit,t.sort,t.order)}onDetails(e){const t=this.inventoryPage.docs.find(t=>t._id==e);this.inventory=Object.assign({},t)}onClose(e){switch(e){case"details":this.inventory=null;break;case"list":this.inventoryPage=null,this.storehouse=null}}onApprove(e){return Object(s.a)(this,void 0,void 0,function*(){this.loading=!0;try{yield this.inventoryService.approveTransferedInventories(e).toPromise(),this.onClose("details"),this.getAllUnapprovedInventories(this.storehouse._id)}catch(t){this.errorMessage=t}this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(ee),i.Ob(c.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-receive"]],decls:10,vars:4,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],["class","col-md-3 d-print-none",4,"ngIf"],["class","col-12 bg-white pb-3",4,"ngIf"],["class","col-12 bg-white px-0 pb-3",4,"ngIf"],[1,"col-9"],[4,"ngIf"],[1,"col-md-3","d-print-none"],[1,"list-group","mb-1"],[1,"list-group-item","disabled"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[3,"page","small","paginate"],[1,"list-group-item",3,"click"],[1,"col-12","bg-white","pb-3"],[3,"inventoryPage","details"],[1,"btn","btn-sm","btn-danger","d-print-none",3,"click"],[1,"col-12","bg-white","px-0","pb-3"],[3,"inventory"],[1,"btn","btn-sm","btn-danger","d-print-none","mx-1",3,"click"],[1,"btn","btn-sm","btn-success","d-print-none","mx-1",3,"click"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"h3"),i.Ec(2,"Receive Inventory"),i.Sb(),i.Sb(),i.Tb(3,"div",1),i.Tb(4,"div",2),i.Cc(5,re,8,3,"div",3),i.Cc(6,ne,5,3,"div",4),i.Cc(7,oe,6,1,"div",5),i.Tb(8,"div",6),i.Cc(9,se,1,0,"loading",7),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Ab(5),i.mc("ngIf",(null==t.storehousePage||null==t.storehousePage.docs?null:t.storehousePage.docs.length)&&!(null!=t.inventoryPage&&null!=t.inventoryPage.docs&&t.inventoryPage.docs.length)),i.Ab(1),i.mc("ngIf",(null==t.inventoryPage||null==t.inventoryPage.docs?null:t.inventoryPage.docs.length)&&!t.inventory),i.Ab(1),i.mc("ngIf",t.inventory),i.Ab(2),i.mc("ngIf",t.loading))},directives:[a.o,a.n,L.a,$,H,M.a],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}"]}),e})();var ce=r("Ysqf");let ae=(()=>{class e{constructor(){this.refresh=new i.o,this.tableName="Stock List of",this.columns=[{path:"product.name",label:"Product",totalLabel:!0},{path:"product.size",label:"Size"},{path:"quantity",label:"Quantity",className:"text-center",total:!0},{path:"purchase_price",label:"Purchase price",total:!0,className:"text-right"}],this.sortColumn={path:"name",order:"asc",limit:8,page:1,search:""}}onRefresh(e){this.sortColumn=Object.assign({},e),this.refresh.emit(Object.assign({sort:e.path},e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["stock-list"]],inputs:{stockPage:"stockPage",name:"name"},outputs:{refresh:"refresh"},decls:1,vars:4,consts:[[3,"tableName","columns","sortColumn","data","refresh"]],template:function(e,t){1&e&&(i.Tb(0,"ng-table",0),i.dc("refresh",function(e){return t.onRefresh(e)}),i.Sb()),2&e&&i.mc("tableName",t.tableName+" "+t.name)("columns",t.columns)("sortColumn",t.sortColumn)("data",t.stockPage)},directives:[z.a],styles:[""],changeDetection:0}),e})();function le(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",6),i.Tb(1,"stock-list",7),i.dc("refresh",function(t){i.xc(e);const r=i.fc();return r.onRefresh(null==r.warehouse?null:r.warehouse._id,t)}),i.Sb(),i.Tb(2,"div",8),i.Tb(3,"button",9),i.dc("click",function(){return i.xc(e),i.fc().onClose()}),i.Pb(4,"i",10),i.Ec(5," Close"),i.Sb(),i.Tb(6,"button",11),i.dc("click",function(){return i.xc(e),i.fc().onPrint()}),i.Pb(7,"i",12),i.Ec(8," Print"),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(1),i.mc("name",null==e.warehouse?null:e.warehouse.name)("stockPage",e.stockPage)}}let be=(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){}onWarehouseSelect(e){this.warehouse=e,console.log(this.warehouse),this.getProductStockbyWarehouseId(e._id,new v.a)}getProductStockbyWarehouseId(e,t){return Object(s.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.stockPage=yield this.service.byWarehouseId(e,t).toPromise()}catch(r){this.errorMessage=r}this.loading=!1})}onRefresh(e,{page:t,limit:r,sort:n,order:o,search:s}){this.getProductStockbyWarehouseId(e,new v.a(t,r,n,o,s))}onClose(){this.stockPage=null,this.warehouse=null}onPrint(){window.print()}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(ce.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-stocks"]],decls:8,vars:1,consts:[[1,"container-fluid","component-head","d-print-none"],[1,"container"],[1,"row"],[1,"col-md-3","d-print-none"],[3,"select"],["class","col bg-white",4,"ngIf"],[1,"col","bg-white"],[3,"name","stockPage","refresh"],[1,"d-flex","flex-row-reverse","bd-highlight"],[1,"btn","btn-sm","btn-danger","d-print-none","mx-1",3,"click"],[1,"fa","fa-times"],[1,"btn","btn-sm","btn-primary","d-print-none","mx-1",3,"click"],[1,"fa","fa-print"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"h3"),i.Ec(2,"Stocks"),i.Sb(),i.Sb(),i.Tb(3,"div",1),i.Tb(4,"div",2),i.Tb(5,"div",3),i.Tb(6,"warehouse-side-list",4),i.dc("select",function(e){return t.onWarehouseSelect(e)}),i.Sb(),i.Sb(),i.Cc(7,le,9,2,"div",5),i.Sb(),i.Sb()),2&e&&(i.Ab(7),i.mc("ngIf",null==t.stockPage||null==t.stockPage.docs?null:t.stockPage.docs.length))},directives:[W,a.o,ae],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}.col[_ngcontent-%COMP%]{padding:20px}@media print{.col[_ngcontent-%COMP%]{padding:50px}}"]}),e})();var ue=r("vkgz");function de(e,t){if(1&e&&i.Pb(0,"ngb-highlight",24),2&e){const e=t.term;i.mc("result",t.result.name)("term",e)}}function he(e,t){1&e&&(i.Tb(0,"small",25),i.Ec(1," Reference required "),i.Sb())}const me=function(e){return{disabled:e}};let fe=(()=>{class e{constructor(e,t){this.fb=e,this.storehouseService=t,this.create=new i.o,this.mouseoverShifting=!1,this.searching=!1,this.searchFailed=!1,this.searchStorehouse=e=>e.pipe(Object(u.a)(300),Object(d.a)(),Object(ue.a)(()=>this.searching=!0),Object(h.a)(e=>this.storehouseService.search(e).pipe(Object(ue.a)(e=>{this.searchFailed=!1}),Object(m.a)(()=>(this.searchFailed=!0,Object(b.a)([]))))),Object(ue.a)(()=>this.searching=!1)),this.storehouseFormatter=e=>{if(e)return`${e.name} [${e.storekeeper_number}]`},this.createForm()}ngOnInit(){}createForm(){this.form=this.fb.group({inventoryType:["transfer",l.t.required],reference:["",l.t.required],from:["",l.t.required],storehouse:["",l.t.required],items:this.fb.array([this.createInventoryItem()])})}pushInventoryItem(){this.form.get("items").push(this.createInventoryItem())}createInventoryItem(){return this.fb.group({product:["",l.t.required],quantity:["",l.t.required],purchase_price:["",l.t.required]})}onRemoveInventoryItem(e){this.form.get("items").removeAt(e)}submit(){this.form.valid&&this.create.emit(this.form.value)}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(l.c),i.Ob(ee))},e.\u0275cmp=i.Ib({type:e,selectors:[["inventory-transfer-form"]],outputs:{create:"create"},decls:37,vars:16,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["type","button","routerLink","/dashboard/inventory",1,"btn","btn-success","btn-sm"],[1,"fa","fa-list"],["rt",""],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"col-md-6","mb-3"],["for","reference"],["type","text","id","reference","formControlName","reference","placeholder","Inventory Number ",1,"form-control"],["class","text-danger",4,"ngIf"],["for","inventoryType"],["id","inventoryType","formControlName","inventoryType",1,"form-control"],["value","transfer"],["for","source_storehouse"],["id","source_storehouse","type","text","formControlName","from","placeholder","From Storehouse name or owner number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],["for","storehouse"],["id","storehouse","type","text","formControlName","storehouse","placeholder","To Storehouse name or owner number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],[1,"row"],[1,"col-md-12"],[3,"parent","removeItem"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"ngClass"],[3,"result","term"],[1,"text-danger"]],template:function(e,t){if(1&e&&(i.Tb(0,"nav",0),i.Tb(1,"a",1),i.Ec(2,"Inventory Transfer form"),i.Sb(),i.Tb(3,"a",2),i.Pb(4,"i",3),i.Ec(5," INVENTORY LIST "),i.Sb(),i.Sb(),i.Cc(6,de,1,2,"ng-template",null,4,i.Dc),i.Tb(8,"form",5),i.dc("ngSubmit",function(){return t.submit()}),i.Tb(9,"div",6),i.Tb(10,"div",7),i.Tb(11,"label",8),i.Ec(12,"Inventory Number* "),i.Sb(),i.Pb(13,"input",9),i.Cc(14,he,2,0,"small",10),i.Sb(),i.Tb(15,"div",7),i.Tb(16,"label",11),i.Ec(17,"Inventory Type *"),i.Sb(),i.Tb(18,"select",12),i.Tb(19,"option",13),i.Ec(20," Transfer "),i.Sb(),i.Sb(),i.Sb(),i.Tb(21,"div",7),i.Tb(22,"label",14),i.Ec(23,"Source Storehouse*"),i.Sb(),i.Pb(24,"input",15),i.Sb(),i.Tb(25,"div",7),i.Tb(26,"label",16),i.Ec(27,"Destination Storehouse*"),i.Sb(),i.Pb(28,"input",17),i.Sb(),i.Sb(),i.Tb(29,"div",18),i.Tb(30,"div",19),i.Tb(31,"inventory-item-form",20),i.dc("removeItem",function(e){return t.onRemoveInventoryItem(e)}),i.Sb(),i.Sb(),i.Tb(32,"button",21),i.dc("click",function(){return t.pushInventoryItem()}),i.Ec(33," Add Inventory Item "),i.Sb(),i.Sb(),i.Tb(34,"div",22),i.Tb(35,"button",23),i.Ec(36," Transfer "),i.Sb(),i.Sb(),i.Sb()),2&e){const e=i.uc(7);i.Ab(8),i.mc("formGroup",t.form),i.Ab(6),i.mc("ngIf",t.form.controls.reference.errors&&t.form.controls.reference.touched),i.Ab(10),i.Gb("is-invalid",t.searchFailed),i.mc("ngbTypeahead",t.searchStorehouse)("resultTemplate",e)("inputFormatter",t.storehouseFormatter),i.Ab(4),i.Gb("is-invalid",t.searchFailed),i.mc("ngbTypeahead",t.searchStorehouse)("resultTemplate",e)("inputFormatter",t.storehouseFormatter),i.Ab(3),i.mc("parent",t.form),i.Ab(4),i.mc("ngClass",i.qc(14,me,t.form.invalid))}},directives:[T.k,n.c,l.v,l.m,l.f,l.a,l.l,l.e,a.o,l.s,l.p,l.u,T.m,C,a.m,T.g],styles:[""]}),e})();function pe(e,t){1&e&&i.Pb(0,"loading")}function ge(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",8),i.Tb(1,"strong"),i.Ec(2,"Success! "),i.Sb(),i.Ec(3),i.Tb(4,"button",9),i.dc("click",function(){return i.xc(e),i.fc().onClose()}),i.Tb(5,"span",10),i.Ec(6,"\xd7"),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(3),i.Gc(" ",e.message," ")}}function ve(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",11),i.Tb(1,"strong"),i.Ec(2,"Failed! "),i.Sb(),i.Ec(3),i.Tb(4,"button",9),i.dc("click",function(){return i.xc(e),i.fc().onClose()}),i.Tb(5,"span",10),i.Ec(6,"\xd7"),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(3),i.Gc(" ",e.errorMessage," ")}}let ye=(()=>{class e{constructor(e){this.inventoryService=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){}onCreateInventory(e){return Object(s.a)(this,void 0,void 0,function*(){console.log(e),this.loading=!0,this.errorMessage="",this.message="";try{yield this.inventoryService.transfer(e).toPromise(),this.message="Inventory added"}catch(t){this.errorMessage=t}this.loading=!1})}onClose(){this.loading=!1,this.errorMessage="",this.message=""}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(c.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-transfer"]],decls:10,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container-fluid"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"create"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"]],template:function(e,t){1&e&&(i.Tb(0,"div",0),i.Tb(1,"h3"),i.Ec(2,"Inventory Transfer"),i.Sb(),i.Sb(),i.Tb(3,"div",1),i.Cc(4,pe,1,0,"loading",2),i.Cc(5,ge,7,1,"div",3),i.Cc(6,ve,7,1,"div",4),i.Tb(7,"div",5),i.Tb(8,"div",6),i.Tb(9,"inventory-transfer-form",7),i.dc("create",function(e){return t.onCreateInventory(e)}),i.Sb(),i.Sb(),i.Sb(),i.Sb()),2&e&&(i.Ab(4),i.mc("ngIf",t.loading),i.Ab(1),i.mc("ngIf",t.message.length>0),i.Ab(1),i.mc("ngIf",t.errorMessage.length>0))},directives:[a.o,fe,M.a],styles:[""]}),e})();var Se=r("B0fy");let Te=(()=>{class e{constructor(){this.edit=new i.o,this.refresh=new i.o,this.tableName="Request Table",this.columns=[{path:"createdAt",label:"Date",pipe:"date",pipeArgs:"dd/MM/yyyy"},{path:"product.name",label:"Product Name"},{path:"product.size",label:"Size"},{path:"createdBy.name",label:"Requested"},{path:"requestStatus",label:"Status"},{key:"_id",type:"button",content:e=>({classname:"edit_link",text:"Select",link:"#",event:{key:"edit",id:e._id}})}],this.sortColumn={path:"priority",order:"asc",limit:8,page:1,search:""},this.pushCol=0}buttonEvent(e){switch(e.key){case"edit":this.edit.emit(e.id)}}onRefresh(e){this.sortColumn=Object.assign({},e),this.refresh.emit(new v.a(e.page,e.limit,e.path,e.order,e.search))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Ib({type:e,selectors:[["request-table"]],inputs:{requestPage:"requestPage"},outputs:{edit:"edit",refresh:"refresh"},decls:1,vars:4,consts:[[3,"tableName","columns","sortColumn","data","refresh","btnEvent"]],template:function(e,t){1&e&&(i.Tb(0,"ng-table",0),i.dc("refresh",function(e){return t.onRefresh(e)})("btnEvent",function(e){return t.buttonEvent(e)}),i.Sb()),2&e&&i.mc("tableName",t.tableName)("columns",t.columns)("sortColumn",t.sortColumn)("data",t.requestPage)},directives:[z.a],styles:[""]}),e})();function Ie(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",6),i.Tb(1,"request-table",7),i.dc("refresh",function(t){return i.xc(e),i.fc().getList(t)})("edit",function(t){return i.xc(e),i.fc().onSelect(t)}),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(1),i.mc("requestPage",e.requestPage)}}function Pe(e,t){1&e&&(i.Tb(0,"div",8),i.Tb(1,"h4"),i.Pb(2,"i",9),i.Ec(3," No rquest found"),i.Sb(),i.Sb())}function we(e,t){if(1&e){const e=i.Ub();i.Tb(0,"div",10),i.Tb(1,"table",11),i.Tb(2,"thead"),i.Tb(3,"tr"),i.Tb(4,"td",12),i.Ec(5,"Feature Details"),i.Sb(),i.Sb(),i.Sb(),i.Tb(6,"tbody"),i.Tb(7,"tr"),i.Tb(8,"th"),i.Ec(9,"Date"),i.Sb(),i.Tb(10,"td"),i.Ec(11),i.gc(12,"date"),i.Sb(),i.Sb(),i.Tb(13,"tr"),i.Tb(14,"th"),i.Ec(15,"Name"),i.Sb(),i.Tb(16,"td"),i.Ec(17),i.Sb(),i.Sb(),i.Tb(18,"tr"),i.Tb(19,"th"),i.Ec(20,"Size"),i.Sb(),i.Tb(21,"td"),i.Ec(22),i.Sb(),i.Sb(),i.Tb(23,"tr"),i.Tb(24,"th"),i.Ec(25,"Requested by"),i.Sb(),i.Tb(26,"td"),i.Ec(27),i.Sb(),i.Sb(),i.Tb(28,"tr"),i.Tb(29,"th"),i.Ec(30,"Requested phone"),i.Sb(),i.Tb(31,"td"),i.Ec(32),i.Sb(),i.Sb(),i.Tb(33,"tr"),i.Tb(34,"th"),i.Ec(35,"Status"),i.Sb(),i.Tb(36,"td"),i.Ec(37),i.Sb(),i.Sb(),i.Tb(38,"tr"),i.Tb(39,"td",13),i.Tb(40,"div",14),i.Tb(41,"strong"),i.Ec(42,"Update status"),i.Sb(),i.Sb(),i.Tb(43,"div",15),i.Tb(44,"button",16),i.dc("click",function(){i.xc(e);const t=i.fc();return t.updateStatus(t.request._id,"Ignored")}),i.Ec(45,"Ignored"),i.Sb(),i.Tb(46,"button",16),i.dc("click",function(){i.xc(e);const t=i.fc();return t.updateStatus(t.request._id,"Processing")}),i.Ec(47,"Processing"),i.Sb(),i.Tb(48,"button",16),i.dc("click",function(){i.xc(e);const t=i.fc();return t.updateStatus(t.request._id,"Done")}),i.Ec(49,"Done"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Tb(50,"tr"),i.Tb(51,"td",13),i.Tb(52,"div",17),i.Tb(53,"button",18),i.dc("click",function(){return i.xc(e),i.fc().request=null}),i.Ec(54,"Close"),i.Sb(),i.Tb(55,"button",18),i.dc("click",function(){i.xc(e);const t=i.fc();return t.onDelete(t.request._id)}),i.Ec(56,"Delete"),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb(),i.Sb()}if(2&e){const e=i.fc();i.Ab(11),i.Fc(i.ic(12,6,e.request.createdAt,"dd/MM/yyyy")),i.Ab(6),i.Fc(e.request.product.name),i.Ab(5),i.Fc(e.request.product.size),i.Ab(5),i.Fc(e.request.createdBy.name),i.Ab(5),i.Fc(e.request.createdBy.phone),i.Ab(5),i.Fc(e.request.requestStatus)}}const Ee=[{path:"add",component:R},{path:"add/:id",component:R},{path:"stocks",component:be},{path:"transfer",component:ye},{path:"receive",component:ie},{path:"convert",component:U},{path:"requests",component:(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.errMsg=""}ngOnInit(){this.getList(new v.a(1,8,"createdAt"))}getList(e){return Object(s.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.requestPage=yield this.service.getList(e).toPromise(),this.loading=!1}catch(t){this.errMsg=t.message}})}onSelect(e){this.request=this.requestPage.docs.find(t=>t._id==e)}updateStatus(e,t){return Object(s.a)(this,void 0,void 0,function*(){try{this.loading=!0;const r=yield this.service.update(e,{status:t}).toPromise(),n=this.requestPage.docs.findIndex(t=>t._id===e);n>-1&&this.requestPage.docs.splice(n,1,r),this.loading=!1}catch(r){}})}onDelete(e){return Object(s.a)(this,void 0,void 0,function*(){if(confirm("Are you sure to delete"))try{this.loading=!0,yield this.service.delete(e).toPromise();const t=this.requestPage.docs.findIndex(t=>t._id===e);t>-1&&this.requestPage.docs.splice(t,1),this.clear()}catch(t){this.errMsg=t.message}})}clear(){this.request=null,this.errMsg="",this.loading=!1}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(Se.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-requests"]],decls:9,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],["class","col bg-white",4,"ngIf","ngIfElse"],["noData",""],["class","col-auto ",4,"ngIf"],[1,"col","bg-white"],[3,"requestPage","refresh","edit"],[1,"col-12","text-center","pt-3"],[1,"fa","fa-thumbs-o-up"],[1,"col-auto"],[1,"table","table-hover","table-bordered","mt-2","text-secondary","table-responsive-sm","table-sm","bg-white"],["colspan","2",1,"form-head"],["colspan","2"],[1,"pt-2"],["role","group","aria-label","status buttons",1,"btn-group","pb-2"],["type","button",1,"btn","btn-sm","btn-light",3,"click"],[1,"d-flex","flex-row-reverse","my-2"],[1,"btn","btn-sm","btn-danger","mx-1",3,"click"]],template:function(e,t){if(1&e&&(i.Tb(0,"div",0),i.Tb(1,"h3"),i.Ec(2,"Requests"),i.Sb(),i.Sb(),i.Tb(3,"div",1),i.Tb(4,"div",2),i.Cc(5,Ie,2,1,"div",3),i.Cc(6,Pe,4,0,"ng-template",null,4,i.Dc),i.Cc(8,we,57,9,"div",5),i.Sb(),i.Sb()),2&e){const e=i.uc(7);i.Ab(5),i.mc("ngIf",(null==t.requestPage?null:t.requestPage.docs.length)>0)("ngIfElse",e),i.Ab(3),i.mc("ngIf",t.request)}},directives:[a.o,Te],pipes:[a.f],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),e})()},{path:"",component:Q}];let Ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Mb({type:e}),e.\u0275inj=i.Lb({imports:[[o.a,n.d.forChild(Ee)]]}),e})()},IiG6:function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return s});var n=r("5zru");const o="^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$",s=[{PATTERN:"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,6}$",MESSAGE:n.b},{PATTERN:"^[\u0410-\u042f\u0430-\u044f\u0401\u0451\\s]+$",MESSAGE:n.a},{PATTERN:o,MESSAGE:n.d}]},aEjQ:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("5zru"),o=r("IiG6"),s=r("fXoL"),i=r("ofXK");function c(e,t){if(1&e&&(s.Rb(0),s.Tb(1,"small",1),s.Ec(2),s.Sb(),s.Qb()),2&e){const e=s.fc();s.Ab(2),s.Fc(e.errorMessage)}}let a=(()=>{class e{constructor(){this.validationErrors=null,this.name="",this.errorMessage=null}ngOnChanges(){this.errorMessage=this.getErrorMessage()}getErrorMessage(){const e=this.validationErrors;return e?e.required?this.name+n.e:e.pattern?this.getPatternMessage(e.pattern.requiredPattern):e.minlength?this.getMinLengthMessage(e.minlength):null:null}getPatternMessage(e){return o.a.filter(t=>t.PATTERN===e)[0].MESSAGE}getMinLengthMessage(e){return"Minimum length should be "+e.requiredLength}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Ib({type:e,selectors:[["form-property-validator"]],inputs:{validationErrors:"validationErrors",name:"name"},features:[s.yb],decls:1,vars:1,consts:[[4,"ngIf"],["id","nameHelp",1,"form-text","text-danger"]],template:function(e,t){1&e&&s.Cc(0,c,3,1,"ng-container",0),2&e&&s.mc("ngIf",t.errorMessage)},directives:[i.o],styles:[""]}),e})()},gpvV:function(e,t,r){"use strict";r.d(t,"a",function(){return b});var n=r("fXoL"),o=r("rd51"),s=r("ofXK"),i=r("3Pt+"),c=r("aEjQ");function a(e,t){1&e&&(n.Tb(0,"span"),n.Ec(1,"*"),n.Sb())}function l(e,t){if(1&e&&(n.Tb(0,"label",4),n.Ec(1),n.Cc(2,a,2,0,"span",5),n.Sb()),2&e){const e=n.fc();n.Cb(e.col?"p-0":"col-sm-3"),n.mc("for",e.fieldId),n.Ab(1),n.Gc(" ",e.label,""),n.Ab(1),n.mc("ngIf",null==e.validator?null:e.validator.required)}}let b=(()=>{class e{constructor(){this.fieldId=null,this.control=null,this.type="text",this.maxlength=null,this.readonly=!1,this.showLabel=!0,this.col=!0,this.onChange=new n.o,this.label=null,this.validationErrors=null}ngOnInit(){this.label=o.a[this.fieldId]?o.a[this.fieldId]:""}ngDoCheck(){this.control.validator&&(this.validator=this.control.validator({})),this.validationErrors=this.control.touched&&this.control.invalid?this.control.errors:null}onValueChange(e){this.onChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Ib({type:e,selectors:[["form-input"]],inputs:{fieldId:"fieldId",control:"control",type:"type",maxlength:"maxlength",readonly:"readonly",showLabel:"showLabel",col:"col"},outputs:{onChange:"onChange"},decls:5,vars:13,consts:[[1,"form-group"],["class","d-none d-sm-block col-form-label col-form-label-sm",3,"for","class",4,"ngIf"],["autocomplete","off",1,"form-control","form-control-sm",3,"type","id","formControl","placeholder","maxlength","readonly","change"],[3,"validationErrors","name"],[1,"d-none","d-sm-block","col-form-label","col-form-label-sm",3,"for"],[4,"ngIf"]],template:function(e,t){1&e&&(n.Tb(0,"div",0),n.Cc(1,l,3,5,"label",1),n.Tb(2,"div"),n.Tb(3,"input",2),n.dc("change",function(e){return t.onValueChange(e)}),n.Sb(),n.Pb(4,"form-property-validator",3),n.Sb(),n.Sb()),2&e&&(n.Cb(t.col?"":"row"),n.Ab(1),n.mc("ngIf",t.showLabel),n.Ab(1),n.Cb(t.col?"":"col-sm-9"),n.Ab(1),n.mc("type",t.type)("id",t.fieldId)("formControl",t.control)("placeholder",t.label)("maxlength",t.maxlength)("readonly",t.readonly),n.Ab(1),n.mc("validationErrors",t.validationErrors)("name",t.label))},directives:[s.o,i.a,i.l,i.d,i.i,c.a],styles:[""]}),e})()},rd51:function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n={address:"Address",barcode:"Barcode",customer:"Customer",cus_add1:"Address line 1",cus_add2:"Address line 2 (optional)",cus_city:"City",cus_country:"Country",categoryId:"Category",confirmPassword:"Confirm Password",description:"Description",deliveryInstruction:"Any delivery instruction? (optional)",email:"Email",image:"Image",images:"Imags",inventoryType:"Inventory Type",latitude:"Latitude",longitude:"Longitude",mrp:"Retail Price",name:"Name",newPassword:"New Password",oldPassword:"Old Password",otp:"OTP",password:"Password",paymentMethod:"Payment Method",phone:"Phone number",point:"Point",price:"Price",priority:"Priority",product:"Product",reference:"Reference",size:"Size",supplierId:"Supplier",supplier:"Supplier",thumb:"Thumb",userId:"User",warehouseId:"Warehouse",warehouse:"Warehouse"}}}]);