(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4rUa":function(e,t,i){"use strict";i.r(t),i.d(t,"ROUTES",function(){return ae}),i.d(t,"ProductsModule",function(){return ce});var r=i("tyNb"),o=i("KZX/"),n=i("mrSG"),s=i("9FRo"),a=i("fXoL"),c=i("wOd6"),b=i("aX47"),u=i("BcLk"),d=i("FNHQ"),l=i("DCc3"),m=i("3Pt+"),g=i("I/JT"),h=i("1kSV"),f=i("ofXK"),p=i("fn6H"),y=i("gpvV"),S=i("WZTj"),v=i("xS1Y"),C=i("/ZIw");function w(e,t){if(1&e){const e=a.Ub();a.Tb(0,"a",7),a.dc("click",function(){a.xc(e);const i=t.$implicit;return a.fc(2).onBrand(i._id)}),a.Ec(1),a.Sb()}if(2&e){const e=t.$implicit;a.Ab(1),a.Fc(e.name)}}function T(e,t){if(1&e&&(a.Tb(0,"div",4),a.Tb(1,"li",5),a.Tb(2,"strong"),a.Ec(3,"Please select a Brand first"),a.Sb(),a.Sb(),a.Cc(4,w,2,1,"a",6),a.Sb()),2&e){const e=a.fc();a.Ab(4),a.mc("ngForOf",e.brands)}}function x(e,t){if(1&e){const e=a.Ub();a.Tb(0,"a",7),a.dc("click",function(){a.xc(e);const i=t.$implicit;return a.fc(2).onCategory(i._id)}),a.Ec(1),a.Sb()}if(2&e){const e=t.$implicit;a.Ab(1),a.Fc(e.name)}}function P(e,t){if(1&e&&(a.Tb(0,"div",4),a.Tb(1,"li",5),a.Tb(2,"strong"),a.Ec(3,"Please select a Category"),a.Sb(),a.Sb(),a.Cc(4,x,2,1,"a",6),a.Sb()),2&e){const e=a.fc();a.Ab(4),a.mc("ngForOf",e.categories)}}function I(e,t){if(1&e){const e=a.Ub();a.Tb(0,"a",7),a.dc("click",function(){a.xc(e);const i=t.$implicit;return a.fc(2).onSubCategory(i._id)}),a.Ec(1),a.Sb()}if(2&e){const e=t.$implicit;a.Ab(1),a.Fc(e.name)}}function A(e,t){if(1&e&&(a.Tb(0,"div",4),a.Tb(1,"li",5),a.Tb(2,"strong"),a.Ec(3,"Please select a Sub-Category"),a.Sb(),a.Sb(),a.Cc(4,I,2,1,"a",6),a.Sb()),2&e){const e=a.fc();a.Ab(4),a.mc("ngForOf",e.subCategories)}}function O(e,t){if(1&e){const e=a.Ub();a.Tb(0,"a",7),a.dc("click",function(){a.xc(e);const i=t.$implicit;return a.fc(2).onSubSubCategory(i._id)}),a.Ec(1),a.Sb()}if(2&e){const e=t.$implicit;a.Ab(1),a.Fc(e.name)}}function k(e,t){if(1&e&&(a.Tb(0,"div",4),a.Tb(1,"li",5),a.Tb(2,"strong"),a.Ec(3,"Please select a Sub-Sub-Category"),a.Sb(),a.Sb(),a.Cc(4,O,2,1,"a",6),a.Sb()),2&e){const e=a.fc();a.Ab(4),a.mc("ngForOf",e.subSubCategories)}}function _(e,t){if(1&e){const e=a.Ub();a.Tb(0,"form-object-label",9),a.dc("onChange",function(){return a.xc(e),a.fc(2).onSubSubCategoryChange()}),a.Sb()}if(2&e){const e=a.fc(2);a.mc("label","SubSubCategory")("name",null==e.subSubCategory?null:e.subSubCategory.name)}}function E(e,t){if(1&e){const e=a.Ub();a.Tb(0,"button",21),a.dc("click",function(){return a.xc(e),a.fc(2).onDelete()}),a.Ec(1,"Delete"),a.Sb()}}function j(e,t){if(1&e&&(a.Tb(0,"div",23),a.Pb(1,"form-validator",24),a.Sb()),2&e){const e=a.fc(2);a.Ab(1),a.mc("form",e.form)}}function U(e,t){if(1&e){const e=a.Ub();a.Tb(0,"form",8),a.dc("ngSubmit",function(){return a.xc(e),a.fc().submit()})("mouseleave",function(){return a.xc(e),a.fc().mouseoverShifting=!1}),a.Tb(1,"form-object-label",9),a.dc("onChange",function(){return a.xc(e),a.fc().onBrandChange()}),a.Sb(),a.Tb(2,"form-object-label",9),a.dc("onChange",function(){return a.xc(e),a.fc().onCategoryChange()}),a.Sb(),a.Tb(3,"form-object-label",9),a.dc("onChange",function(){return a.xc(e),a.fc().onSubCategoryChange()}),a.Sb(),a.Cc(4,_,1,2,"form-object-label",10),a.Pb(5,"form-input",11),a.Pb(6,"form-input",11),a.Pb(7,"form-textarea",11),a.Tb(8,"div",12),a.Tb(9,"div",13),a.Pb(10,"form-input",14),a.Sb(),a.Tb(11,"div",13),a.Pb(12,"form-input",14),a.Sb(),a.Tb(13,"div",13),a.Pb(14,"form-input",11),a.Sb(),a.Sb(),a.Tb(15,"div",12),a.Tb(16,"div",13),a.Pb(17,"form-input",14),a.Sb(),a.Tb(18,"div",13),a.Pb(19,"form-input",14),a.Sb(),a.Sb(),a.Tb(20,"form-file",15),a.dc("err",function(t){return a.xc(e),a.fc().onError(t)}),a.Sb(),a.Tb(21,"form-file",16),a.dc("err",function(t){return a.xc(e),a.fc().onError(t)}),a.Sb(),a.Tb(22,"div",17),a.Tb(23,"span",18),a.dc("mouseenter",function(){return a.xc(e),a.fc().mouseoverShifting=!0}),a.Tb(24,"button",19),a.Ec(25),a.Sb(),a.Sb(),a.Cc(26,E,2,0,"button",20),a.Tb(27,"button",21),a.dc("click",function(){return a.xc(e),a.fc().clean()}),a.Ec(28,"Clear"),a.Sb(),a.Sb(),a.Cc(29,j,2,1,"div",22),a.Sb()}if(2&e){const e=a.fc();a.mc("formGroup",e.form),a.Ab(1),a.mc("label","Brand*")("name",e.brand.name),a.Ab(1),a.mc("label","Category*")("name",e.category.name),a.Ab(1),a.mc("label","SubCategory*")("name",e.subCategory.name),a.Ab(1),a.mc("ngIf",e.subSubCategory),a.Ab(1),a.mc("fieldId","barcode")("control",e.form.get("barcode")),a.Ab(1),a.mc("fieldId","name")("control",e.form.get("name")),a.Ab(1),a.mc("fieldId","description")("control",e.form.get("description")),a.Ab(3),a.mc("fieldId","priority")("control",e.form.get("priority"))("type","number"),a.Ab(2),a.mc("fieldId","point")("control",e.form.get("point"))("type","number"),a.Ab(2),a.mc("fieldId","size")("control",e.form.get("size")),a.Ab(3),a.mc("fieldId","price")("control",e.form.get("price"))("type","number"),a.Ab(2),a.mc("fieldId","mrp")("control",e.form.get("mrp"))("type","number"),a.Ab(1),a.mc("fieldId","thumb")("form",e.form)("hints","Preferred image size is 400x400 px"),a.Ab(1),a.mc("fieldId","images")("form",e.form)("maxFileCount",4)("hints","Preferred image size is 800X600 px"),a.Ab(3),a.mc("disabled",!e.form.valid),a.Ab(1),a.Fc(e.exists?"Update":"Save"),a.Ab(1),a.mc("ngIf",e.exists),a.Ab(3),a.mc("ngIf",e.mouseoverShifting)}}let M=(()=>{class e extends g.a{constructor(e){super(),this.fb=e,this.selectCategory=new a.o,this.selectSubCategory=new a.o,this.createForm()}ngOnChanges(e){super.ngOnChanges(e),e.item&&this.item&&(this.onBrand(this.item.brand._id),this.onCategory(this.item.category._id)),e.subCategories&&this.item&&this.item.subCategory&&this.onSubCategory(this.item.subCategory._id),e.subSubCategories&&this.item&&this.item.subSubCategory&&this.onSubSubCategory(this.item.subSubCategory._id)}createForm(){this.form=this.fb.group({name:["",[m.t.required,m.t.minLength(3)]],barcode:["",[m.t.required,m.t.min(0)]],size:["",m.t.required],point:[0,[m.t.required,m.t.min(0)]],description:["",m.t.required],price:[0,[m.t.required,m.t.min(0)]],mrp:[0,[m.t.required,m.t.min(0)]],brandId:["",m.t.required],categoryId:["",m.t.required],subCategoryId:["",m.t.required],subSubCategoryId:[""],priority:[0,[m.t.required,m.t.min(0)]],images:[null],thumb:[null]})}onBrand(e){this.brand=this.brands.find(t=>t._id==e),this.form.patchValue({brandId:this.brand._id})}onCategory(e){this.category=this.categories.find(t=>t._id==e),this.form.patchValue({categoryId:this.category._id}),this.selectCategory.emit(this.category.slug)}onSubCategory(e){this.subCategory=this.subCategories.find(t=>t._id==e),this.form.patchValue({subCategoryId:this.subCategory._id}),this.selectSubCategory.emit(this.subCategory.slug)}onSubSubCategory(e){this.subSubCategory=this.subSubCategories.find(t=>t._id==e),this.form.patchValue({subSubCategoryId:this.subSubCategory._id})}onBrandChange(){this.brand=null,this.onCategoryChange()}onCategoryChange(){this.category=null,this.onSubCategoryChange()}onSubCategoryChange(){this.subCategory=null,this.subSubCategory=null}onSubSubCategoryChange(){this.subSubCategory=null}onError(e){this.err=e}clean(){this.brand=null,this.category=null,this.subCategory=null,this.subSubCategory=null,super.clean()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(m.c))},e.\u0275cmp=a.Ib({type:e,selectors:[["product-form"]],inputs:{brands:"brands",categories:"categories",subCategories:"subCategories",subSubCategories:"subSubCategories"},outputs:{selectCategory:"selectCategory",selectSubCategory:"selectSubCategory"},features:[a.xb,a.yb],decls:8,vars:6,consts:[[1,"navbar","navbar-light","bg-light","border","border-bottom-0"],[1,"navbar-brand"],["class","list-group",4,"ngIf"],["class","p-3 border bg-white mb-5",3,"formGroup","ngSubmit","mouseleave",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action list-group-item-light py-1 text-dark",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","list-group-item-light","py-1","text-dark",3,"click"],[1,"p-3","border","bg-white","mb-5",3,"formGroup","ngSubmit","mouseleave"],[3,"label","name","onChange"],[3,"label","name","onChange",4,"ngIf"],[3,"fieldId","control"],[1,"row"],[1,"col-md-6"],[3,"fieldId","control","type"],[3,"fieldId","form","hints","err"],[3,"fieldId","form","maxFileCount","hints","err"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"disabled"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[3,"form"]],template:function(e,t){1&e&&(a.Tb(0,"nav",0),a.Tb(1,"a",1),a.Ec(2),a.Sb(),a.Sb(),a.Cc(3,T,5,1,"div",2),a.Cc(4,P,5,1,"div",2),a.Cc(5,A,5,1,"div",2),a.Cc(6,k,5,1,"div",2),a.Cc(7,U,30,39,"form",3)),2&e&&(a.Ab(2),a.Gc("",t.exists?"Update":"Add"," Product"),a.Ab(1),a.mc("ngIf",!t.brand),a.Ab(1),a.mc("ngIf",t.brand&&!t.category),a.Ab(1),a.mc("ngIf",t.category&&!t.subCategory&&(null==t.subCategories?null:t.subCategories.length)),a.Ab(1),a.mc("ngIf",t.subCategory&&!t.subSubCategory&&(null==t.subSubCategories?null:t.subSubCategories.length)),a.Ab(1),a.mc("ngIf",t.brand&&t.category&&t.subCategories&&(0==(null==t.subSubCategories?null:t.subSubCategories.length)||t.subSubCategory)))},directives:[h.i,f.p,f.o,m.v,m.m,m.f,p.a,y.a,S.a,v.a,C.a],styles:[""]}),e})(),L=(()=>{class e{constructor(e,t,i,r,o,n){this.service=e,this.brandService=t,this.categoryService=i,this.subCategoryService=r,this.subSubCategoryService=o,this.activatedRoute=n,this.imageUrl="",this.thumbUrl="",this.loading=!1,this.errorMessage="",this.imageUrl=this.service.imageLink+"/image/",this.thumbUrl=this.service.imageLink+"/thumb/",this.id=n.snapshot.params.id}ngOnInit(){this.getCategoryList(new s.a(1,1e3,"priority")),this.getBrandList(new s.a(1,1e3,"priority")),this.id&&this.getProduct(this.id)}getProduct(e){return Object(n.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.product=yield this.service.get(e).toPromise(),this.product._id=e,this.loading=!1}catch(t){}})}getCategoryList(e){return Object(n.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.categoryPage=yield this.categoryService.getList(e).toPromise(),this.loading=!1}catch(t){this.errorMessage=t.message}})}getBrandList(e){return Object(n.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.brandPage=yield this.brandService.getList(e).toPromise(),this.loading=!1}catch(t){this.errorMessage=t.message}})}getSubCategoryList(e,t){return Object(n.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.subCategoryPage=yield this.subCategoryService.byCategorySlug(e,t).toPromise(),this.loading=!1}catch(i){this.errorMessage=i.message}})}handleCateogySelect(e){this.getSubCategoryList(e,new s.a(1,1e3,"priority"))}getSubSubCategoryList(e,t){return Object(n.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.subSubCategoryPage=yield this.subSubCategoryService.bySubCategorySlug(e,t).toPromise(),this.loading=!1}catch(i){this.errorMessage=i.message}})}handleSubCateogySelect(e){this.getSubSubCategoryList(e,new s.a(1,1e3,"priority"))}onCreate(e){return Object(n.a)(this,void 0,void 0,function*(){try{this.loading=!0,yield this.service.create(e).toPromise(),this.loading=!1}catch(t){this.errorMessage=t.message}})}onUpdate(e){return Object(n.a)(this,void 0,void 0,function*(){try{this.loading=!0,yield this.service.update(this.id,e).toPromise(),this.loading=!1}catch(t){this.errorMessage=t.message}})}onDelete(e){return Object(n.a)(this,void 0,void 0,function*(){if(console.log(e),confirm("Are you sure to delete")){try{yield this.service.delete(e).toPromise();const t=this.subSubCategoryPage.docs.findIndex(t=>t._id===e);t>-1&&this.subSubCategoryPage.docs.splice(t,1)}catch(t){this.errorMessage=t}this.clear()}})}clear(){this.product=null,this.errorMessage="",this.loading=!1}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(c.a),a.Ob(b.a),a.Ob(u.a),a.Ob(d.a),a.Ob(l.a),a.Ob(r.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-new-products"]],decls:7,vars:5,consts:[[1,"container-fluid","component-head"],[1,"container-fluid"],[1,"row"],[1,"col-md-9","bg-white"],[3,"item","brands","categories","subCategories","subSubCategories","create","update","delete","selectCategory","selectSubCategory"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Tb(1,"h3"),a.Ec(2,"New Products"),a.Sb(),a.Sb(),a.Tb(3,"div",1),a.Tb(4,"div",2),a.Tb(5,"div",3),a.Tb(6,"product-form",4),a.dc("create",function(e){return t.onCreate(e)})("update",function(e){return t.onUpdate(e)})("delete",function(e){return t.onDelete(e)})("selectCategory",function(e){return t.handleCateogySelect(e)})("selectSubCategory",function(e){return t.handleSubCateogySelect(e)}),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.Ab(6),a.mc("item",t.product)("brands",null==t.brandPage?null:t.brandPage.docs)("categories",null==t.categoryPage?null:t.categoryPage.docs)("subCategories",null==t.subCategoryPage?null:t.subCategoryPage.docs)("subSubCategories",null==t.subSubCategoryPage?null:t.subSubCategoryPage.docs))},directives:[M],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.product[_ngcontent-%COMP%]{padding:2px;margin-bottom:3px;border:1px solid #dcdcdc}.product-image[_ngcontent-%COMP%]{height:30px}"]}),e})();var F=i("MYE5");let B=(()=>{class e{constructor(e){this.service=e,this.imageUrl="",this.thumbUrl="",this.message="",this.errorMessage="",this.loading=!1,this.imageUrl=this.service.imageLink+"/image/",this.thumbUrl=this.service.imageLink+"/thumb/"}ngOnInit(){this.getList(new s.a)}getList(e){return Object(n.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.productPage=yield this.service.getList(e).toPromise(),this.loading=!1}catch(t){this.errorMessage=t.message}})}refreshData({page:e,limit:t,sort:i,order:r,search:o}){this.getList(new s.a(e,t,i,r,o))}onEdit(e){console.log("onEdit",e)}onToogleActive(e){return Object(n.a)(this,void 0,void 0,function*(){try{this.loading=!0;const t=yield this.service.toggleActive(e).toPromise(),i=this.productPage.docs.findIndex(t=>t._id===e);this.productPage.docs.splice(i,1,t),this.loading=!1}catch(t){}})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(c.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-products"]],decls:7,vars:2,consts:[[1,"container-fluid","component-head"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[3,"productPage","thumbUrl","edit","refresh","active"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Tb(1,"h3"),a.Ec(2,"Products"),a.Sb(),a.Sb(),a.Tb(3,"div",1),a.Tb(4,"div",2),a.Tb(5,"div",3),a.Tb(6,"product-table",4),a.dc("edit",function(e){return t.onEdit(e)})("refresh",function(e){return t.refreshData(e)})("active",function(e){return t.onToogleActive(e)}),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.Ab(6),a.mc("productPage",t.productPage)("thumbUrl",t.thumbUrl))},directives:[F.a],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.product[_ngcontent-%COMP%]{padding:2px;margin-bottom:3px;border:1px solid #dcdcdc}.product-image[_ngcontent-%COMP%]{height:30px}.column[_ngcontent-%COMP%]{float:left;width:25%;padding:5px}.column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:200px}"]}),e})();var q=i("NuOk"),D=i("wSIx");let N=(()=>{class e{constructor(){this.edit=new a.o,this.assign=new a.o,this.details=new a.o,this.refresh=new a.o,this.tableName="Warehouse Table",this.columns=[{path:"name",label:"Name",searchable:!0},{path:"admin.name",label:"Admin",searchable:!0},{path:"priority",label:"Priority"},{key:"_id",type:"button",content:e=>({classname:"edit_link",text:"Edit",link:"#",event:{key:"edit",id:e._id}})},{key:"_id",type:"button",content:e=>({classname:"edit_link",text:"Assign",link:"#",event:{key:"assign",id:e._id}})},{key:"_id",type:"button",content:e=>({classname:"edit_link",text:"Details",link:"#",event:{key:"details",id:e._id}})}],this.sortColumn={path:"name",order:"asc",limit:8,page:1,search:""}}buttonEvent(e){switch(e.key){case"edit":this.edit.emit(e.id);break;case"assign":this.assign.emit(e.id);break;case"details":this.details.emit(e.id)}}onRefresh(e){this.sortColumn=Object.assign({},e),this.refresh.emit(Object.assign({sort:e.path},e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ib({type:e,selectors:[["warehouse-table"]],inputs:{warehousePage:"warehousePage"},outputs:{edit:"edit",assign:"assign",details:"details",refresh:"refresh"},decls:1,vars:4,consts:[[3,"tableName","columns","sortColumn","data","refresh","btnEvent"]],template:function(e,t){1&e&&(a.Tb(0,"ng-table",0),a.dc("refresh",function(e){return t.onRefresh(e)})("btnEvent",function(e){return t.buttonEvent(e)}),a.Sb()),2&e&&a.mc("tableName",t.tableName)("columns",t.columns)("sortColumn",t.sortColumn)("data",t.warehousePage)},directives:[D.a],styles:[""]}),e})();function G(e,t){if(1&e&&(a.Rb(0),a.Tb(1,"p",11),a.Ec(2),a.Sb(),a.Qb()),2&e){const e=a.fc();a.Ab(2),a.Fc(e.err)}}function R(e,t){if(1&e){const e=a.Ub();a.Tb(0,"button",9),a.dc("click",function(){return a.xc(e),a.fc().onDelete()}),a.Ec(1,"Delete"),a.Sb()}}function z(e,t){if(1&e&&(a.Tb(0,"div",12),a.Pb(1,"form-validator",13),a.Sb()),2&e){const e=a.fc();a.Ab(1),a.mc("form",e.form)}}let V=(()=>{class e extends g.a{constructor(e){super(),this.fb=e,this.createForm()}createForm(){this.form=this.fb.group({name:["",m.t.required],priority:["",m.t.required],latitude:["0",m.t.required],longitude:["0",m.t.required],address:["",m.t.required]})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(m.c))},e.\u0275cmp=a.Ib({type:e,selectors:[["warehouse-form"]],features:[a.xb],decls:17,vars:20,consts:[[1,"form-head"],[4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[3,"fieldId","control"],[3,"fieldId","control","type"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"disabled"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"px-4","text-center","text-danger"],[1,"text-danger"],[3,"form"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Ec(1),a.Sb(),a.Cc(2,G,3,1,"ng-container",1),a.Tb(3,"form",2),a.dc("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),a.Pb(4,"form-input",3),a.Pb(5,"form-input",4),a.Pb(6,"form-input",4),a.Pb(7,"form-input",4),a.Pb(8,"form-textarea",3),a.Tb(9,"div",5),a.Tb(10,"span",6),a.dc("mouseenter",function(){return t.mouseoverShifting=!0}),a.Tb(11,"button",7),a.Ec(12),a.Sb(),a.Sb(),a.Cc(13,R,2,0,"button",8),a.Tb(14,"button",9),a.dc("click",function(){return t.clean()}),a.Ec(15,"Clear"),a.Sb(),a.Sb(),a.Cc(16,z,2,1,"div",10),a.Sb()),2&e&&(a.Ab(1),a.Gc(" ",t.exists?"Update":"New"," Warehouse\n"),a.Ab(1),a.mc("ngIf",t.err.length>0),a.Ab(1),a.mc("formGroup",t.form),a.Ab(1),a.mc("fieldId","name")("control",t.form.get("name")),a.Ab(1),a.mc("fieldId","priority")("control",t.form.get("priority"))("type","number"),a.Ab(1),a.mc("fieldId","latitude")("control",t.form.get("latitude"))("type","number"),a.Ab(1),a.mc("fieldId","longitude")("control",t.form.get("longitude"))("type","number"),a.Ab(1),a.mc("fieldId","address")("control",t.form.get("address")),a.Ab(3),a.mc("disabled",!t.form.valid),a.Ab(1),a.Fc(t.exists?"Update":"Save"),a.Ab(1),a.mc("ngIf",t.exists),a.Ab(3),a.mc("ngIf",t.mouseoverShifting))},directives:[f.p,m.v,m.m,m.f,y.a,S.a,C.a],styles:[""]}),e})();var W=i("LRne"),$=i("Kj3r"),J=i("/uUt"),X=i("eIep"),K=i("JIr8"),Q=i("lJxs"),Z=i("/7iW");function H(e,t){if(1&e&&(a.Rb(0),a.Tb(1,"p",14),a.Ec(2),a.Sb(),a.Qb()),2&e){const e=a.fc();a.Ab(2),a.Fc(e.err)}}function Y(e,t){1&e&&(a.Tb(0,"small",15),a.Ec(1,"userId Required"),a.Sb())}function ee(e,t){if(1&e){const e=a.Ub();a.Tb(0,"button",12),a.dc("click",function(){return a.xc(e),a.fc().onDelete()}),a.Ec(1,"Delete"),a.Sb()}}function te(e,t){if(1&e&&(a.Tb(0,"div",16),a.Pb(1,"form-validator",17),a.Sb()),2&e){const e=a.fc();a.Ab(1),a.mc("form",e.form)}}let ie=(()=>{class e extends g.a{constructor(e,t){super(),this.fb=e,this.userService=t,this.searchUser=e=>e.pipe(Object($.a)(300),Object(J.a)(),Object(X.a)(e=>e.length<3?[]:this.userService.getList(new s.a(1,10)).pipe(Object(K.a)(()=>Object(W.a)([])))),Object(Q.a)(e=>e?e.docs:[])),this.formatter=e=>{if(e)return e.name+"["+e.phone+"]"},this.createForm()}ngOnChanges(e){e.item&&this.item&&this.form.patchValue({warehouseId:this.item._id})}onSelectUser(e){this.form.patchValue({userId:e.item._id})}createForm(){this.form=this.fb.group({warehouseId:["",m.t.required],userId:["",m.t.required]})}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(m.c),a.Ob(Z.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["warehouse-assign-form"]],features:[a.xb,a.yb],decls:18,vars:14,consts:[[1,"form-head"],[4,"ngIf"],[1,"p-3",3,"formGroup","ngSubmit","mouseleave"],[3,"label","name","showButton"],[1,"form-group"],["for","userId",1,"d-none","d-sm-block","col-form-label","col-form-label-sm","p-0"],["id","userId","type","text",1,"form-control","form-control-sm",3,"ngbTypeahead","resultFormatter","inputFormatter","editable","selectItem"],["class","form-text text-danger",4,"ngIf"],[1,"d-flex","flex-row-reverse","bd-highlight"],[3,"mouseenter"],["type","submit",1,"btn","btn-sm","btn-light","mx-1",3,"disabled"],["type","button","class","btn btn-sm btn-light mx-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["class","text-danger",4,"ngIf"],[1,"px-4","text-center","text-danger"],[1,"form-text","text-danger"],[1,"text-danger"],[3,"form"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Ec(1," Warehouse Assign\n"),a.Sb(),a.Cc(2,H,3,1,"ng-container",1),a.Tb(3,"form",2),a.dc("ngSubmit",function(){return t.submit()})("mouseleave",function(){return t.mouseoverShifting=!1}),a.Pb(4,"form-object-label",3),a.Tb(5,"div",4),a.Tb(6,"label",5),a.Ec(7,"User*"),a.Sb(),a.Tb(8,"input",6),a.dc("selectItem",function(e){return t.onSelectUser(e)}),a.Sb(),a.Cc(9,Y,2,0,"small",7),a.Sb(),a.Tb(10,"div",8),a.Tb(11,"span",9),a.dc("mouseenter",function(){return t.mouseoverShifting=!0}),a.Tb(12,"button",10),a.Ec(13),a.Sb(),a.Sb(),a.Cc(14,ee,2,0,"button",11),a.Tb(15,"button",12),a.dc("click",function(){return t.clean()}),a.Ec(16,"Clear"),a.Sb(),a.Sb(),a.Cc(17,te,2,1,"div",13),a.Sb()),2&e&&(a.Ab(2),a.mc("ngIf",t.err.length>0),a.Ab(1),a.mc("formGroup",t.form),a.Ab(1),a.mc("label","Warehouse*")("name",null==t.item?null:t.item.name)("showButton",!1),a.Ab(4),a.mc("ngbTypeahead",t.searchUser)("resultFormatter",t.formatter)("inputFormatter",t.formatter)("editable",!1),a.Ab(1),a.mc("ngIf",t.form.controls.userId.errors&&t.form.controls.userId.touched),a.Ab(3),a.mc("disabled",!t.form.valid),a.Ab(1),a.Fc(t.exists?"Update":"Save"),a.Ab(1),a.mc("ngIf",t.exists),a.Ab(3),a.mc("ngIf",t.mouseoverShifting))},directives:[f.p,m.v,m.m,m.f,p.a,h.k,C.a],styles:[""]}),e})(),re=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ib({type:e,selectors:[["warehouse-details"]],inputs:{warehouse:"warehouse"},decls:19,vars:21,consts:[[1,"form-head"],[1,"p-3"],[1,"row"],[1,"col-md-6"],[3,"label","name","showButton"],[1,"col-6"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Ec(1," Warehouse Details\n"),a.Sb(),a.Tb(2,"div",1),a.Tb(3,"div",2),a.Tb(4,"div",3),a.Pb(5,"form-object-label",4),a.Sb(),a.Tb(6,"div",3),a.Pb(7,"form-object-label",4),a.Sb(),a.Sb(),a.Tb(8,"div",2),a.Tb(9,"div",5),a.Pb(10,"form-object-label",4),a.Sb(),a.Tb(11,"div",5),a.Pb(12,"form-object-label",4),a.Sb(),a.Sb(),a.Pb(13,"form-object-label",4),a.Tb(14,"div",2),a.Tb(15,"div",5),a.Pb(16,"form-object-label",4),a.Sb(),a.Tb(17,"div",5),a.Pb(18,"form-object-label",4),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.Ab(5),a.mc("label","Name")("name",null==t.warehouse?null:t.warehouse.name)("showButton",!1),a.Ab(2),a.mc("label","Priority")("name",null==t.warehouse?null:t.warehouse.priority)("showButton",!1),a.Ab(3),a.mc("label","Admin name")("name",null==t.warehouse||null==t.warehouse.admin?null:t.warehouse.admin.name)("showButton",!1),a.Ab(2),a.mc("label","Admin phone")("name",null==t.warehouse||null==t.warehouse.admin?null:t.warehouse.admin.phone)("showButton",!1),a.Ab(1),a.mc("label","Address")("name",null==t.warehouse?null:t.warehouse.address)("showButton",!1),a.Ab(3),a.mc("label","Latitude")("name",null==t.warehouse?null:t.warehouse.latitude)("showButton",!1),a.Ab(2),a.mc("label","longitude")("name",null==t.warehouse?null:t.warehouse.longitude)("showButton",!1))},directives:[p.a],styles:[""]}),e})();function oe(e,t){if(1&e){const e=a.Ub();a.Tb(0,"div",6),a.Tb(1,"div",7),a.Tb(2,"warehouse-form",8),a.dc("create",function(t){return a.xc(e),a.fc().onCreate(t)})("update",function(t){return a.xc(e),a.fc().onUpdate(t)})("delete",function(t){return a.xc(e),a.fc().onDelete(t)}),a.Sb(),a.Sb(),a.Sb()}if(2&e){const e=a.fc();a.Ab(2),a.mc("item",e.warehouse)("err",e.errorMessage)}}function ne(e,t){if(1&e){const e=a.Ub();a.Tb(0,"div",6),a.Tb(1,"div",9),a.Tb(2,"warehouse-assign-form",10),a.dc("create",function(t){return a.xc(e),a.fc().handleAssign(t)}),a.Sb(),a.Sb(),a.Sb()}if(2&e){const e=a.fc();a.Ab(2),a.mc("item",e.warehouse)}}function se(e,t){if(1&e&&(a.Tb(0,"div",6),a.Tb(1,"div",9),a.Pb(2,"warehouse-details",11),a.Sb(),a.Sb()),2&e){const e=a.fc();a.Ab(2),a.mc("warehouse",e.warehouse)}}const ae=[{path:"warehouse",component:(()=>{class e{constructor(e){this.service=e,this.loading=!1,this.errorMessage="",this.mode="edit"}ngOnInit(){this.getList(new s.a)}getList(e){return Object(n.a)(this,void 0,void 0,function*(){try{this.loading=!0,this.warehousePage=yield this.service.getList(e).toPromise(),this.clear()}catch(t){this.errorMessage=t.message}})}refreshData({page:e,limit:t,sort:i,order:r,search:o}){this.getList(new s.a(e,t,i,r,o))}onEdit(e){this.mode="edit";const t=this.warehousePage.docs.find(t=>t._id==e);this.warehouse=Object.assign({},t)}onCreate(e){return Object(n.a)(this,void 0,void 0,function*(){console.log("onCreate",e);try{this.loading=!0;const t=yield this.service.create(e).toPromise();this.warehousePage.docs.push(t),this.clear()}catch(t){this.errorMessage=t.message}})}onUpdate(e){return Object(n.a)(this,void 0,void 0,function*(){console.log("onUpdate ",e);try{this.loading=!0,yield this.service.update(this.warehouse._id,e).toPromise(),this.getList(new s.a),this.clear()}catch(t){this.errorMessage=t.message}})}onDelete(e){return Object(n.a)(this,void 0,void 0,function*(){if(confirm("Are you sure to delete")){try{this.loading=!0,yield this.service.delete(e).toPromise();const t=this.warehousePage.docs.findIndex(t=>t._id===e);t>-1&&this.warehousePage.docs.splice(t,1),this.clear()}catch(t){this.errorMessage=t}this.clear()}})}clear(){this.warehouse=null,this.errorMessage="",this.loading=!1}onAssign(e){this.mode="assign";const t=this.warehousePage.docs.find(t=>t._id==e);this.warehouse=Object.assign({},t)}handleAssign(e){return Object(n.a)(this,void 0,void 0,function*(){try{const t=yield this.service.assign(e.warehouseId,e.userId).toPromise(),i=this.warehousePage.docs.findIndex(t=>t._id==e.warehosueId);this.warehousePage.docs.splice(i,1,t),console.log(t),this.warehouse=null,this.mode="edit"}catch(t){}})}onDetails(e){this.mode="details";const t=this.warehousePage.docs.find(t=>t._id==e);this.warehouse=Object.assign({},t)}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(q.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-warehouse"]],decls:10,vars:4,consts:[[1,"container-fluid","component-head"],[1,"container-fluid"],[1,"row"],["class","col-md-5",4,"ngIf"],[1,"col-md-6"],[3,"warehousePage","details","assign","edit","refresh"],[1,"col-md-5"],[1,"border","rounded","bg-white"],[3,"item","err","create","update","delete"],[1,"border","rounded"],[3,"item","create"],[3,"warehouse"]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Tb(1,"h3"),a.Ec(2,"Warehouse"),a.Sb(),a.Sb(),a.Tb(3,"div",1),a.Tb(4,"div",2),a.Cc(5,oe,3,2,"div",3),a.Cc(6,ne,3,1,"div",3),a.Cc(7,se,3,1,"div",3),a.Tb(8,"div",4),a.Tb(9,"warehouse-table",5),a.dc("details",function(e){return t.onDetails(e)})("assign",function(e){return t.onAssign(e)})("edit",function(e){return t.onEdit(e)})("refresh",function(e){return t.refreshData(e)}),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.Ab(5),a.mc("ngIf","edit"==t.mode),a.Ab(1),a.mc("ngIf","assign"==t.mode),a.Ab(1),a.mc("ngIf","details"==t.mode),a.Ab(2),a.mc("warehousePage",t.warehousePage))},directives:[f.p,N,V,ie,re],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}"]}),e})()},{path:"new-products",component:L},{path:"new-products/:id",component:L},{path:"",component:B}];let ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Mb({type:e}),e.\u0275inj=a.Lb({imports:[[o.a,r.d.forChild(ae)]]}),e})()}}]);